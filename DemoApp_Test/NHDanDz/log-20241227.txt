[2024-12-27 00:00:08.190] [INF] Product Cookie Freeze price: 60000
[2024-12-27 00:00:08.198] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:00:08.203] [INF] Product Cookie Freeze price: 60000
[2024-12-27 00:00:08.204] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:00:08.242] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:00:08.258] [INF] Found cart for user admin: True
[2024-12-27 00:00:08.282] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 00:00:08.283] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 00:00:45.088] [ERR] Failed executing DbCommand (29ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = Double), @p16='?' (Size = 450), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p31='?' (Size = 10), @p17='?' (Size = 10), @p18='?' (Size = 50), @p19='?' (Size = 50), @p20='?' (DbType = DateTime2), @p21='?' (Size = 500), @p22='?' (DbType = Double), @p23='?' (DbType = DateTime2), @p24='?' (DbType = Double), @p25='?' (DbType = Double), @p26='?' (Size = 100), @p27='?' (DbType = Boolean), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (Size = 20), @p32='?' (Size = 450), @p33='?' (Size = 10), @p34='?' (DbType = DateTime2), @p35='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bill] ([Bill_id], [Client_id], [Contact], [Date], [DeleteStatus], [Location], [OrderNotes], [PaymentMethod], [PaymentStatus], [ProcessDate], [Status], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Client] SET [Contact] = @p12, [Gmail] = @p13, [Location] = @p14, [Name] = @p15
OUTPUT 1
WHERE [Client_id] = @p16;
UPDATE [Voucher] SET [Brand_id] = @p17, [Code] = @p18, [CreatedBy] = @p19, [CreatedDate] = @p20, [Description] = @p21, [Detail] = @p22, [ExpirationDate] = @p23, [MaximumDiscount] = @p24, [MinimumSpend] = @p25, [Name] = @p26, [Status] = @p27, [UsageCount] = @p28, [UsageLimit] = @p29, [VoucherType] = @p30
OUTPUT 1
WHERE [Voucher_id] = @p31;
INSERT INTO [Bill_Voucher] ([Bill_id], [Voucher_id], [AppliedDate], [DiscountAmount])
VALUES (@p32, @p33, @p34, @p35);
[2024-12-27 00:00:50.963] [ERR] An exception occurred in the database while saving changes for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL099   ).
Violation of PRIMARY KEY constraint 'PK_HoaDon_Voucher'. Cannot insert duplicate key in object 'dbo.Bill_Voucher'. The duplicate key value is (VC001     , BILL099   ).
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5ea8adcb-4ac3-44cc-8f60-f054bd88116e
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL099   ).
Violation of PRIMARY KEY constraint 'PK_HoaDon_Voucher'. Cannot insert duplicate key in object 'dbo.Bill_Voucher'. The duplicate key value is (VC001     , BILL099   ).
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5ea8adcb-4ac3-44cc-8f60-f054bd88116e
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2024-12-27 00:00:54.049] [ERR] Error in PlaceOrder: An error occurred while saving the entity changes. See the inner exception for details.
[2024-12-27 00:01:32.512] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:02:21.716] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:02:21.718] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:02:22.359] [INF] Product Cookie Freeze price: 60000
[2024-12-27 00:02:22.359] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:02:22.361] [INF] Product Cookie Freeze price: 60000
[2024-12-27 00:02:22.362] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:02:23.711] [INF] Product Cookie Freeze price: 60000
[2024-12-27 00:02:23.712] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:02:23.714] [INF] Product Cookie Freeze price: 60000
[2024-12-27 00:02:23.715] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:02:23.720] [INF] Found cart for user admin: True
[2024-12-27 00:02:23.720] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 00:02:23.721] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 00:02:47.940] [ERR] Failed executing DbCommand (14ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = Double), @p16='?' (Size = 450), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p31='?' (Size = 10), @p17='?' (Size = 10), @p18='?' (Size = 50), @p19='?' (Size = 50), @p20='?' (DbType = DateTime2), @p21='?' (Size = 500), @p22='?' (DbType = Double), @p23='?' (DbType = DateTime2), @p24='?' (DbType = Double), @p25='?' (DbType = Double), @p26='?' (Size = 100), @p27='?' (DbType = Boolean), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (Size = 20), @p32='?' (Size = 450), @p33='?' (Size = 10), @p34='?' (DbType = DateTime2), @p35='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bill] ([Bill_id], [Client_id], [Contact], [Date], [DeleteStatus], [Location], [OrderNotes], [PaymentMethod], [PaymentStatus], [ProcessDate], [Status], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Client] SET [Contact] = @p12, [Gmail] = @p13, [Location] = @p14, [Name] = @p15
OUTPUT 1
WHERE [Client_id] = @p16;
UPDATE [Voucher] SET [Brand_id] = @p17, [Code] = @p18, [CreatedBy] = @p19, [CreatedDate] = @p20, [Description] = @p21, [Detail] = @p22, [ExpirationDate] = @p23, [MaximumDiscount] = @p24, [MinimumSpend] = @p25, [Name] = @p26, [Status] = @p27, [UsageCount] = @p28, [UsageLimit] = @p29, [VoucherType] = @p30
OUTPUT 1
WHERE [Voucher_id] = @p31;
INSERT INTO [Bill_Voucher] ([Bill_id], [Voucher_id], [AppliedDate], [DiscountAmount])
VALUES (@p32, @p33, @p34, @p35);
[2024-12-27 00:02:47.945] [ERR] An exception occurred in the database while saving changes for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL100   ).
Violation of PRIMARY KEY constraint 'PK_HoaDon_Voucher'. Cannot insert duplicate key in object 'dbo.Bill_Voucher'. The duplicate key value is (VC001     , BILL100   ).
The statement has been terminated.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5ea8adcb-4ac3-44cc-8f60-f054bd88116e
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL100   ).
Violation of PRIMARY KEY constraint 'PK_HoaDon_Voucher'. Cannot insert duplicate key in object 'dbo.Bill_Voucher'. The duplicate key value is (VC001     , BILL100   ).
The statement has been terminated.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5ea8adcb-4ac3-44cc-8f60-f054bd88116e
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2024-12-27 00:02:47.972] [ERR] Error in PlaceOrder: An error occurred while saving the entity changes. See the inner exception for details.
[2024-12-27 00:05:49.632] [WRN] Failed to determine the https port for redirect.
[2024-12-27 00:05:50.157] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 00:05:55.407] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:05:55.413] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:05:55.898] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:05:55.899] [INF] Product Cookie Freeze price: 60000
[2024-12-27 00:05:55.903] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:05:55.904] [INF] Product Cookie Freeze price: 60000
[2024-12-27 00:05:56.741] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:05:56.742] [INF] Product Cookie Freeze price: 60000
[2024-12-27 00:05:56.745] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:05:56.745] [INF] Product Cookie Freeze price: 60000
[2024-12-27 00:05:56.771] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:05:56.780] [INF] Found cart for user admin: True
[2024-12-27 00:05:56.781] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 00:05:56.782] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 00:06:06.435] [ERR] Failed executing DbCommand (19ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = Double), @p16='?' (Size = 450), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p31='?' (Size = 10), @p17='?' (Size = 10), @p18='?' (Size = 50), @p19='?' (Size = 50), @p20='?' (DbType = DateTime2), @p21='?' (Size = 500), @p22='?' (DbType = Double), @p23='?' (DbType = DateTime2), @p24='?' (DbType = Double), @p25='?' (DbType = Double), @p26='?' (Size = 100), @p27='?' (DbType = Boolean), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (Size = 20), @p32='?' (Size = 450), @p33='?' (Size = 10), @p34='?' (DbType = DateTime2), @p35='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bill] ([Bill_id], [Client_id], [Contact], [Date], [DeleteStatus], [Location], [OrderNotes], [PaymentMethod], [PaymentStatus], [ProcessDate], [Status], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Client] SET [Contact] = @p12, [Gmail] = @p13, [Location] = @p14, [Name] = @p15
OUTPUT 1
WHERE [Client_id] = @p16;
UPDATE [Voucher] SET [Brand_id] = @p17, [Code] = @p18, [CreatedBy] = @p19, [CreatedDate] = @p20, [Description] = @p21, [Detail] = @p22, [ExpirationDate] = @p23, [MaximumDiscount] = @p24, [MinimumSpend] = @p25, [Name] = @p26, [Status] = @p27, [UsageCount] = @p28, [UsageLimit] = @p29, [VoucherType] = @p30
OUTPUT 1
WHERE [Voucher_id] = @p31;
INSERT INTO [Bill_Voucher] ([Bill_id], [Voucher_id], [AppliedDate], [DiscountAmount])
VALUES (@p32, @p33, @p34, @p35);
[2024-12-27 00:06:06.952] [ERR] An exception occurred in the database while saving changes for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL101   ).
Violation of PRIMARY KEY constraint 'PK_HoaDon_Voucher'. Cannot insert duplicate key in object 'dbo.Bill_Voucher'. The duplicate key value is (VC001     , BILL101   ).
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:8f5e9d15-5a8e-4e25-b9aa-4b13f03a44a8
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL101   ).
Violation of PRIMARY KEY constraint 'PK_HoaDon_Voucher'. Cannot insert duplicate key in object 'dbo.Bill_Voucher'. The duplicate key value is (VC001     , BILL101   ).
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:8f5e9d15-5a8e-4e25-b9aa-4b13f03a44a8
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2024-12-27 00:06:06.974] [ERR] Error in PlaceOrder: An error occurred while saving the entity changes. See the inner exception for details.
[2024-12-27 00:06:09.417] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:06:53.462] [WRN] Failed to determine the https port for redirect.
[2024-12-27 00:06:54.180] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 00:07:10.954] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:07:10.959] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:07:11.456] [INF] Product Cappuccino price: 55000
[2024-12-27 00:07:11.457] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:07:11.460] [INF] Product Cappuccino price: 55000
[2024-12-27 00:07:11.460] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:07:12.635] [INF] Product Cappuccino price: 55000
[2024-12-27 00:07:12.635] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:07:12.638] [INF] Product Cappuccino price: 55000
[2024-12-27 00:07:12.639] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:07:12.663] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:07:12.672] [INF] Found cart for user admin: True
[2024-12-27 00:07:12.672] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 00:07:12.673] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 00:07:27.011] [ERR] Failed executing DbCommand (20ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = Double), @p16='?' (Size = 450), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p31='?' (Size = 10), @p17='?' (Size = 10), @p18='?' (Size = 50), @p19='?' (Size = 50), @p20='?' (DbType = DateTime2), @p21='?' (Size = 500), @p22='?' (DbType = Double), @p23='?' (DbType = DateTime2), @p24='?' (DbType = Double), @p25='?' (DbType = Double), @p26='?' (Size = 100), @p27='?' (DbType = Boolean), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (Size = 20), @p32='?' (Size = 450), @p33='?' (Size = 10), @p34='?' (DbType = DateTime2), @p35='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bill] ([Bill_id], [Client_id], [Contact], [Date], [DeleteStatus], [Location], [OrderNotes], [PaymentMethod], [PaymentStatus], [ProcessDate], [Status], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Client] SET [Contact] = @p12, [Gmail] = @p13, [Location] = @p14, [Name] = @p15
OUTPUT 1
WHERE [Client_id] = @p16;
UPDATE [Voucher] SET [Brand_id] = @p17, [Code] = @p18, [CreatedBy] = @p19, [CreatedDate] = @p20, [Description] = @p21, [Detail] = @p22, [ExpirationDate] = @p23, [MaximumDiscount] = @p24, [MinimumSpend] = @p25, [Name] = @p26, [Status] = @p27, [UsageCount] = @p28, [UsageLimit] = @p29, [VoucherType] = @p30
OUTPUT 1
WHERE [Voucher_id] = @p31;
INSERT INTO [Bill_Voucher] ([Bill_id], [Voucher_id], [AppliedDate], [DiscountAmount])
VALUES (@p32, @p33, @p34, @p35);
[2024-12-27 00:07:27.037] [ERR] An exception occurred in the database while saving changes for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL102   ).
Violation of PRIMARY KEY constraint 'PK_HoaDon_Voucher'. Cannot insert duplicate key in object 'dbo.Bill_Voucher'. The duplicate key value is (VC001     , BILL102   ).
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:cce0d6dd-f561-4b51-a600-87f166655f19
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL102   ).
Violation of PRIMARY KEY constraint 'PK_HoaDon_Voucher'. Cannot insert duplicate key in object 'dbo.Bill_Voucher'. The duplicate key value is (VC001     , BILL102   ).
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:cce0d6dd-f561-4b51-a600-87f166655f19
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2024-12-27 00:07:27.381] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:07:43.043] [INF] Access Login Page
[2024-12-27 00:07:45.323] [INF] Login successful
[2024-12-27 00:07:45.371] [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
[2024-12-27 00:07:45.384] [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
[2024-12-27 00:08:10.715] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:11:24.043] [INF] Access Login Page
[2024-12-27 00:11:33.583] [INF] Access Login Page
[2024-12-27 00:11:34.758] [INF] Login successful
[2024-12-27 00:11:42.811] [INF] Access Login Page
[2024-12-27 00:11:44.022] [INF] Login successful
[2024-12-27 00:11:51.569] [INF] Current user role: Admin
[2024-12-27 00:11:51.785] [INF] Current user role: Admin
[2024-12-27 00:11:54.261] [INF] Access Login Page
[2024-12-27 00:11:56.519] [INF] Login successful
[2024-12-27 00:12:02.816] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:12:04.476] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:12:04.505] [ERR] The view 'OrderDetail' was not found. Searched locations: ["/Views/Account/OrderDetail.cshtml","/Views/Shared/OrderDetail.cshtml"]
[2024-12-27 00:12:04.550] [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'OrderDetail' was not found. The following locations were searched:
/Views/Account/OrderDetail.cshtml
/Views/Shared/OrderDetail.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Program.cs:line 89
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2024-12-27 00:12:09.346] [ERR] The view 'OrderDetail' was not found. Searched locations: ["/Views/Account/OrderDetail.cshtml","/Views/Shared/OrderDetail.cshtml"]
[2024-12-27 00:12:09.374] [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'OrderDetail' was not found. The following locations were searched:
/Views/Account/OrderDetail.cshtml
/Views/Shared/OrderDetail.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Program.cs:line 89
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2024-12-27 00:13:52.628] [ERR] The view 'OrderDetail' was not found. Searched locations: ["/Views/Account/OrderDetail.cshtml","/Views/Shared/OrderDetail.cshtml"]
[2024-12-27 00:13:52.650] [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'OrderDetail' was not found. The following locations were searched:
/Views/Account/OrderDetail.cshtml
/Views/Shared/OrderDetail.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Program.cs:line 89
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2024-12-27 00:14:13.742] [WRN] Failed to determine the https port for redirect.
[2024-12-27 00:14:14.339] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 00:15:19.694] [INF] Product Cappuccino price: 55000
[2024-12-27 00:15:19.698] [INF] Product Cappuccino price: 55000
[2024-12-27 00:15:20.189] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:15:20.190] [INF] Product Cappuccino price: 55000
[2024-12-27 00:15:20.192] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:15:20.193] [INF] Product Cappuccino price: 55000
[2024-12-27 00:15:21.369] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:15:21.370] [INF] Product Cappuccino price: 55000
[2024-12-27 00:15:21.372] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 00:15:21.372] [INF] Product Cappuccino price: 55000
[2024-12-27 00:15:21.405] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:15:21.416] [INF] Found cart for user khnguyenne: True
[2024-12-27 00:15:21.417] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 00:15:21.418] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 00:15:49.254] [ERR] Failed executing DbCommand (20ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = Double), @p16='?' (Size = 450), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p31='?' (Size = 10), @p17='?' (Size = 10), @p18='?' (Size = 50), @p19='?' (Size = 50), @p20='?' (DbType = DateTime2), @p21='?' (Size = 500), @p22='?' (DbType = Double), @p23='?' (DbType = DateTime2), @p24='?' (DbType = Double), @p25='?' (DbType = Double), @p26='?' (Size = 100), @p27='?' (DbType = Boolean), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (Size = 20), @p32='?' (Size = 450), @p33='?' (Size = 10), @p34='?' (DbType = DateTime2), @p35='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bill] ([Bill_id], [Client_id], [Contact], [Date], [DeleteStatus], [Location], [OrderNotes], [PaymentMethod], [PaymentStatus], [ProcessDate], [Status], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Client] SET [Contact] = @p12, [Gmail] = @p13, [Location] = @p14, [Name] = @p15
OUTPUT 1
WHERE [Client_id] = @p16;
UPDATE [Voucher] SET [Brand_id] = @p17, [Code] = @p18, [CreatedBy] = @p19, [CreatedDate] = @p20, [Description] = @p21, [Detail] = @p22, [ExpirationDate] = @p23, [MaximumDiscount] = @p24, [MinimumSpend] = @p25, [Name] = @p26, [Status] = @p27, [UsageCount] = @p28, [UsageLimit] = @p29, [VoucherType] = @p30
OUTPUT 1
WHERE [Voucher_id] = @p31;
INSERT INTO [Bill_Voucher] ([Bill_id], [Voucher_id], [AppliedDate], [DiscountAmount])
VALUES (@p32, @p33, @p34, @p35);
[2024-12-27 00:15:49.279] [ERR] An exception occurred in the database while saving changes for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL103   ).
Violation of PRIMARY KEY constraint 'PK_HoaDon_Voucher'. Cannot insert duplicate key in object 'dbo.Bill_Voucher'. The duplicate key value is (VC001     , BILL103   ).
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:581e9500-9093-403b-bb4b-47ab025002e6
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL103   ).
Violation of PRIMARY KEY constraint 'PK_HoaDon_Voucher'. Cannot insert duplicate key in object 'dbo.Bill_Voucher'. The duplicate key value is (VC001     , BILL103   ).
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:581e9500-9093-403b-bb4b-47ab025002e6
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2024-12-27 00:15:49.356] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:16:25.123] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:16:37.297] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:16:37.326] [ERR] The view 'OrderDetail' was not found. Searched locations: ["/Views/Account/OrderDetail.cshtml","/Views/Shared/OrderDetail.cshtml"]
[2024-12-27 00:16:37.369] [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'OrderDetail' was not found. The following locations were searched:
/Views/Account/OrderDetail.cshtml
/Views/Shared/OrderDetail.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Program.cs:line 89
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2024-12-27 00:21:35.059] [WRN] Failed to determine the https port for redirect.
[2024-12-27 00:21:35.554] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 00:21:47.282] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:21:49.906] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:23:21.254] [WRN] Failed to determine the https port for redirect.
[2024-12-27 00:23:21.742] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 00:23:48.156] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:23:51.870] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:24:07.485] [ERR] The view 'ChangePassword' was not found. Searched locations: ["/Views/Account/ChangePassword.cshtml","/Views/Shared/ChangePassword.cshtml"]
[2024-12-27 00:24:07.522] [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'ChangePassword' was not found. The following locations were searched:
/Views/Account/ChangePassword.cshtml
/Views/Shared/ChangePassword.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Program.cs:line 89
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2024-12-27 00:24:10.947] [ERR] The view 'ChangePassword' was not found. Searched locations: ["/Views/Account/ChangePassword.cshtml","/Views/Shared/ChangePassword.cshtml"]
[2024-12-27 00:24:10.966] [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'ChangePassword' was not found. The following locations were searched:
/Views/Account/ChangePassword.cshtml
/Views/Shared/ChangePassword.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Program.cs:line 89
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2024-12-27 00:27:15.313] [WRN] Failed to determine the https port for redirect.
[2024-12-27 00:27:15.837] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 00:27:49.709] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:32:28.992] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:37:41.275] [WRN] Failed to determine the https port for redirect.
[2024-12-27 00:37:42.055] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 00:38:59.488] [WRN] Failed to determine the https port for redirect.
[2024-12-27 00:39:00.218] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 00:39:17.276] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:40:03.308] [WRN] Failed to determine the https port for redirect.
[2024-12-27 00:40:03.916] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 00:41:54.406] [WRN] Failed to determine the https port for redirect.
[2024-12-27 00:41:54.860] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 00:44:20.744] [WRN] Failed to determine the https port for redirect.
[2024-12-27 00:44:21.249] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 00:45:22.576] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:46:50.663] [WRN] Failed to determine the https port for redirect.
[2024-12-27 00:46:51.193] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 00:47:15.931] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 00:47:42.831] [INF] Access Login Page
[2024-12-27 00:47:44.772] [INF] Login successful
[2024-12-27 00:47:52.352] [INF] Access Login Page
[2024-12-27 00:47:54.698] [INF] Login successful
[2024-12-27 00:47:56.996] [INF] Access Login Page
[2024-12-27 00:48:11.539] [WRN] Forgot password attempt for non-existent username: team349
[2024-12-27 00:48:37.115] [WRN] No email address found for username: nhdandz@gmail.com
[2024-12-27 09:01:31.078] [WRN] Failed to determine the https port for redirect.
[2024-12-27 09:01:33.147] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 09:02:39.537] [INF] Access Login Page
[2024-12-27 09:02:40.909] [INF] Login successful
[2024-12-27 09:03:07.069] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 09:03:07.076] [INF] Found cart for user khnguyenne: True
[2024-12-27 09:03:13.705] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:03:13.708] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:03:14.105] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:03:14.106] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:03:14.108] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:03:14.109] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:03:15.199] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:03:15.200] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:03:15.202] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:03:15.202] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:03:15.206] [INF] Found cart for user khnguyenne: True
[2024-12-27 09:03:15.207] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 09:03:15.207] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 09:03:29.201] [ERR] Failed executing DbCommand (18ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = Double), @p16='?' (Size = 450), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p31='?' (Size = 10), @p17='?' (Size = 10), @p18='?' (Size = 50), @p19='?' (Size = 50), @p20='?' (DbType = DateTime2), @p21='?' (Size = 500), @p22='?' (DbType = Double), @p23='?' (DbType = DateTime2), @p24='?' (DbType = Double), @p25='?' (DbType = Double), @p26='?' (Size = 100), @p27='?' (DbType = Boolean), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (Size = 20), @p32='?' (Size = 450), @p33='?' (Size = 10), @p34='?' (DbType = DateTime2), @p35='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bill] ([Bill_id], [Client_id], [Contact], [Date], [DeleteStatus], [Location], [OrderNotes], [PaymentMethod], [PaymentStatus], [ProcessDate], [Status], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Client] SET [Contact] = @p12, [Gmail] = @p13, [Location] = @p14, [Name] = @p15
OUTPUT 1
WHERE [Client_id] = @p16;
UPDATE [Voucher] SET [Brand_id] = @p17, [Code] = @p18, [CreatedBy] = @p19, [CreatedDate] = @p20, [Description] = @p21, [Detail] = @p22, [ExpirationDate] = @p23, [MaximumDiscount] = @p24, [MinimumSpend] = @p25, [Name] = @p26, [Status] = @p27, [UsageCount] = @p28, [UsageLimit] = @p29, [VoucherType] = @p30
OUTPUT 1
WHERE [Voucher_id] = @p31;
INSERT INTO [Bill_Voucher] ([Bill_id], [Voucher_id], [AppliedDate], [DiscountAmount])
VALUES (@p32, @p33, @p34, @p35);
[2024-12-27 09:03:29.230] [ERR] An exception occurred in the database while saving changes for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL104   ).
Violation of PRIMARY KEY constraint 'PK_HoaDon_Voucher'. Cannot insert duplicate key in object 'dbo.Bill_Voucher'. The duplicate key value is (VC001     , BILL104   ).
The statement has been terminated.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4310f797-2e48-47ff-995f-ade23a816461
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL104   ).
Violation of PRIMARY KEY constraint 'PK_HoaDon_Voucher'. Cannot insert duplicate key in object 'dbo.Bill_Voucher'. The duplicate key value is (VC001     , BILL104   ).
The statement has been terminated.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4310f797-2e48-47ff-995f-ade23a816461
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2024-12-27 09:03:29.289] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 09:03:36.798] [INF] Access Login Page
[2024-12-27 09:03:49.081] [INF] Access Login Page
[2024-12-27 09:03:51.021] [INF] Login successful
[2024-12-27 09:03:59.065] [INF] Access Login Page
[2024-12-27 09:07:46.158] [WRN] Failed to determine the https port for redirect.
[2024-12-27 09:07:46.949] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 09:11:35.065] [INF] Access Login Page
[2024-12-27 09:11:38.230] [INF] Login successful
[2024-12-27 09:22:46.109] [INF] Access Login Page
[2024-12-27 09:22:49.395] [INF] Access Login Page
[2024-12-27 09:22:50.977] [INF] Login successful
[2024-12-27 09:22:52.190] [INF] Access Login Page
[2024-12-27 09:24:29.111] [INF] Access Login Page
[2024-12-27 09:24:31.941] [INF] Access Login Page
[2024-12-27 09:24:32.830] [INF] Login successful
[2024-12-27 09:24:36.572] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:24:36.573] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:24:36.573] [INF] Product Freeze Choco price: 60000
[2024-12-27 09:24:36.578] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:24:36.579] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:24:36.579] [INF] Product Freeze Choco price: 60000
[2024-12-27 09:24:36.610] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 09:24:36.617] [INF] Found cart for user khnguyenne: True
[2024-12-27 09:24:36.619] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 09:24:36.619] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 09:24:36.620] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 09:24:38.290] [INF] Access Login Page
[2024-12-27 09:24:39.398] [INF] Login successful
[2024-12-27 09:24:41.427] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:24:41.428] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:24:41.428] [INF] Product Freeze Choco price: 60000
[2024-12-27 09:24:41.431] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:24:41.431] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:24:41.432] [INF] Product Freeze Choco price: 60000
[2024-12-27 09:24:41.435] [INF] Found cart for user khnguyenne: True
[2024-12-27 09:24:41.436] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 09:24:41.437] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 09:24:41.437] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 09:25:11.274] [INF] Access Login Page
[2024-12-27 09:25:15.726] [INF] Login successful
[2024-12-27 09:25:22.713] [INF] Access Login Page
[2024-12-27 09:25:45.872] [INF] Access Login Page
[2024-12-27 09:26:45.762] [INF] Access Login Page
[2024-12-27 09:27:24.150] [INF] Access Login Page
[2024-12-27 09:27:26.570] [INF] Login successful
[2024-12-27 09:28:38.534] [INF] Access Login Page
[2024-12-27 09:28:48.760] [INF] Access Login Page
[2024-12-27 09:28:49.734] [INF] Login successful
[2024-12-27 09:28:51.762] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:28:51.763] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:28:51.764] [INF] Product Freeze Choco price: 60000
[2024-12-27 09:28:51.766] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:28:51.767] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:28:51.767] [INF] Product Freeze Choco price: 60000
[2024-12-27 09:28:51.771] [INF] Found cart for user khnguyenne: True
[2024-12-27 09:28:51.771] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 09:28:51.772] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 09:28:51.772] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 09:28:51.879] [INF] Found cart for user khnguyenne: True
[2024-12-27 09:28:51.880] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 09:28:51.881] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 09:28:51.881] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 09:28:51.882] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 09:28:51.882] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 09:28:51.882] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 09:29:01.675] [INF] Attempting to remove product: SP011     
[2024-12-27 09:29:02.642] [INF] Attempting to remove product: SP013     
[2024-12-27 09:29:04.127] [INF] Attempting to remove product: SP012     
[2024-12-27 09:29:05.080] [INF] Attempting to remove product: SP012     
[2024-12-27 09:29:06.308] [INF] Attempting to remove product: SP011     
[2024-12-27 09:29:07.268] [INF] Attempting to remove product: SP013     
[2024-12-27 09:29:11.555] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:11.557] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:12.029] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:12.031] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:12.388] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:12.390] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:12.543] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:12.545] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:12.685] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:12.688] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:13.945] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:13.947] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:13.951] [INF] Found cart for user khnguyenne: True
[2024-12-27 09:29:13.951] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 09:29:18.159] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:18.160] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:29:18.162] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:18.162] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:29:18.712] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:18.713] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:29:18.713] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:29:18.715] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:18.716] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:29:18.716] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:29:20.005] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:20.006] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:29:20.007] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:29:20.009] [INF] Product Cappuccino price: 55000
[2024-12-27 09:29:20.009] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:29:20.010] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:29:20.013] [INF] Found cart for user khnguyenne: True
[2024-12-27 09:29:20.014] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 09:29:20.015] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 09:29:20.015] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 09:29:27.642] [ERR] Failed executing DbCommand (28ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = Double), @p16='?' (Size = 450), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p31='?' (Size = 10), @p17='?' (Size = 10), @p18='?' (Size = 50), @p19='?' (Size = 50), @p20='?' (DbType = DateTime2), @p21='?' (Size = 500), @p22='?' (DbType = Double), @p23='?' (DbType = DateTime2), @p24='?' (DbType = Double), @p25='?' (DbType = Double), @p26='?' (Size = 100), @p27='?' (DbType = Boolean), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (Size = 20), @p32='?' (Size = 450), @p33='?' (Size = 10), @p34='?' (DbType = DateTime2), @p35='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bill] ([Bill_id], [Client_id], [Contact], [Date], [DeleteStatus], [Location], [OrderNotes], [PaymentMethod], [PaymentStatus], [ProcessDate], [Status], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Client] SET [Contact] = @p12, [Gmail] = @p13, [Location] = @p14, [Name] = @p15
OUTPUT 1
WHERE [Client_id] = @p16;
UPDATE [Voucher] SET [Brand_id] = @p17, [Code] = @p18, [CreatedBy] = @p19, [CreatedDate] = @p20, [Description] = @p21, [Detail] = @p22, [ExpirationDate] = @p23, [MaximumDiscount] = @p24, [MinimumSpend] = @p25, [Name] = @p26, [Status] = @p27, [UsageCount] = @p28, [UsageLimit] = @p29, [VoucherType] = @p30
OUTPUT 1
WHERE [Voucher_id] = @p31;
INSERT INTO [Bill_Voucher] ([Bill_id], [Voucher_id], [AppliedDate], [DiscountAmount])
VALUES (@p32, @p33, @p34, @p35);
[2024-12-27 09:29:27.667] [ERR] An exception occurred in the database while saving changes for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL105   ).
Violation of PRIMARY KEY constraint 'PK_HoaDon_Voucher'. Cannot insert duplicate key in object 'dbo.Bill_Voucher'. The duplicate key value is (VC001     , BILL105   ).
The statement has been terminated.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:20ee7ab6-98b8-4a97-90f0-89cc922af886
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL105   ).
Violation of PRIMARY KEY constraint 'PK_HoaDon_Voucher'. Cannot insert duplicate key in object 'dbo.Bill_Voucher'. The duplicate key value is (VC001     , BILL105   ).
The statement has been terminated.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:20ee7ab6-98b8-4a97-90f0-89cc922af886
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2024-12-27 09:29:27.732] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 09:29:32.648] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:29:32.650] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:29:33.091] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:29:33.091] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:29:33.094] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:29:33.095] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:29:33.650] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:29:33.651] [INF] Product Freeze Choco price: 60000
[2024-12-27 09:29:33.651] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:29:33.653] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:29:33.654] [INF] Product Freeze Choco price: 60000
[2024-12-27 09:29:33.654] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:29:34.876] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:29:34.878] [INF] Product Freeze Choco price: 60000
[2024-12-27 09:29:34.879] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:29:34.881] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 09:29:34.882] [INF] Product Freeze Choco price: 60000
[2024-12-27 09:29:34.882] [INF] Product Cookie Freeze price: 60000
[2024-12-27 09:29:34.886] [INF] Found cart for user khnguyenne: True
[2024-12-27 09:29:34.887] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 09:29:34.888] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 09:29:34.888] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 09:29:45.329] [INF] Access Login Page
[2024-12-27 09:29:58.615] [INF] Access Login Page
[2024-12-27 09:29:59.484] [INF] Login successful
[2024-12-27 09:30:06.705] [INF] Access Login Page
[2024-12-27 09:30:26.921] [INF] Access Login Page
[2024-12-27 09:30:36.016] [INF] Login successful
[2024-12-27 09:30:54.521] [INF] Access Login Page
[2024-12-27 10:01:23.318] [INF] Access Login Page
[2024-12-27 10:01:25.045] [INF] Login successful
[2024-12-27 10:06:23.990] [WRN] Failed to determine the https port for redirect.
[2024-12-27 10:06:24.443] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 10:08:40.632] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:08:40.633] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:08:40.633] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:08:40.637] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:08:40.638] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:08:40.639] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:08:40.669] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 10:08:40.676] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:08:40.677] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:08:40.678] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 10:08:40.678] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 10:08:44.777] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 10:08:47.627] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 10:10:06.721] [INF] Access Login Page
[2024-12-27 10:10:08.830] [INF] Login successful
[2024-12-27 10:10:17.551] [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
[2024-12-27 10:10:17.566] [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
[2024-12-27 10:10:34.969] [INF] Access Login Page
[2024-12-27 10:10:37.622] [INF] Login successful
[2024-12-27 10:12:48.571] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:12:48.572] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:12:48.573] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:12:48.575] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:12:48.576] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:12:48.577] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:12:48.581] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:12:48.581] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:12:48.582] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 10:12:48.582] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 10:16:30.737] [WRN] Failed to determine the https port for redirect.
[2024-12-27 10:16:31.560] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 10:16:36.033] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:16:36.034] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:16:36.034] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:16:36.038] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:16:36.039] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:16:36.039] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:16:36.070] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 10:16:36.077] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:16:36.078] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:16:36.078] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 10:16:36.079] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 10:16:43.134] [INF] Access Login Page
[2024-12-27 10:16:58.882] [INF] Access Login Page
[2024-12-27 10:16:59.855] [INF] Login successful
[2024-12-27 10:16:59.906] [ERR] Error in Checkout: Object reference not set to an instance of an object.
[2024-12-27 10:17:02.637] [INF] Access Login Page
[2024-12-27 10:17:07.279] [INF] Access Login Page
[2024-12-27 10:17:18.812] [INF] Access Login Page
[2024-12-27 10:17:26.310] [INF] Access Login Page
[2024-12-27 10:17:27.227] [INF] Login successful
[2024-12-27 10:40:24.168] [WRN] Failed to determine the https port for redirect.
[2024-12-27 10:40:24.792] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 10:40:28.786] [INF] Access Login Page
[2024-12-27 10:40:40.441] [INF] Access Login Page
[2024-12-27 10:40:41.552] [INF] Login successful
[2024-12-27 10:40:41.714] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:40:44.394] [INF] Access Login Page
[2024-12-27 10:40:44.428] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:40:45.455] [INF] Access Login Page
[2024-12-27 10:40:45.485] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:40:45.912] [INF] Access Login Page
[2024-12-27 10:40:45.940] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:40:46.051] [INF] Access Login Page
[2024-12-27 10:40:46.079] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:40:46.207] [INF] Access Login Page
[2024-12-27 10:40:46.235] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:40:51.920] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:40:51.920] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:40:51.921] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:40:51.924] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:40:51.925] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:40:51.926] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:40:51.942] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 10:40:51.948] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:40:51.948] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:40:51.949] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 10:40:51.949] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 10:40:51.975] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:40:51.975] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 10:40:51.976] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:40:51.977] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 10:40:51.978] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 10:41:00.012] [INF] Product Cappuccino price: 55000
[2024-12-27 10:41:00.013] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:41:00.015] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:41:00.017] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:41:00.020] [INF] Product Cappuccino price: 55000
[2024-12-27 10:41:00.021] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:41:00.021] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:41:00.022] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:41:00.027] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:41:00.027] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 10:41:00.028] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:41:00.028] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 10:41:00.029] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 10:41:15.888] [INF] Access Login Page
[2024-12-27 10:41:18.799] [INF] Access Login Page
[2024-12-27 10:41:20.915] [INF] Login successful
[2024-12-27 10:41:23.089] [INF] Access Login Page
[2024-12-27 10:41:38.253] [ERR] Failed executing DbCommand (18ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = Double), @p16='?' (Size = 450), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bill] ([Bill_id], [Client_id], [Contact], [Date], [DeleteStatus], [Location], [OrderNotes], [PaymentMethod], [PaymentStatus], [ProcessDate], [Status], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Client] SET [Contact] = @p12, [Gmail] = @p13, [Location] = @p14, [Name] = @p15
OUTPUT 1
WHERE [Client_id] = @p16;
[2024-12-27 10:41:38.274] [ERR] An exception occurred in the database while saving changes for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL106   ).
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:55429ab5-659d-4d1a-9972-19eecf6375fd
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL106   ).
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:55429ab5-659d-4d1a-9972-19eecf6375fd
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2024-12-27 10:41:38.338] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 10:41:40.175] [INF] Access Login Page
[2024-12-27 10:41:52.533] [INF] Access Login Page
[2024-12-27 10:41:54.873] [INF] Login successful
[2024-12-27 10:41:54.906] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:41:58.003] [INF] Access Login Page
[2024-12-27 10:41:58.035] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:41:58.642] [INF] Access Login Page
[2024-12-27 10:41:58.672] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:41:59.079] [INF] Access Login Page
[2024-12-27 10:41:59.113] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:41:59.497] [INF] Access Login Page
[2024-12-27 10:41:59.526] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:41:59.829] [INF] Access Login Page
[2024-12-27 10:41:59.857] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:41:59.991] [INF] Access Login Page
[2024-12-27 10:42:00.026] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:42:00.141] [INF] Access Login Page
[2024-12-27 10:42:00.170] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:42:00.301] [INF] Access Login Page
[2024-12-27 10:42:00.366] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:42:00.518] [INF] Access Login Page
[2024-12-27 10:42:00.642] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:42:00.687] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:42:00.715] [INF] Product Cappuccino price: 55000
[2024-12-27 10:42:00.717] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:42:00.717] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:42:00.718] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:42:00.722] [INF] Product Cappuccino price: 55000
[2024-12-27 10:42:00.723] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:42:00.724] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:42:00.725] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:42:00.730] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:42:00.731] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 10:42:00.731] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:42:00.732] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 10:42:00.732] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 10:42:00.743] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:42:00.743] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 10:42:00.744] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:42:00.745] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 10:42:00.745] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:42:00.746] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 10:42:11.436] [INF] Access Login Page
[2024-12-27 10:42:20.187] [INF] Access Login Page
[2024-12-27 10:42:21.233] [INF] Login successful
[2024-12-27 10:42:21.247] [INF] Product Cappuccino price: 55000
[2024-12-27 10:42:21.247] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:42:21.248] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:42:21.249] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:42:21.250] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:42:21.253] [INF] Product Cappuccino price: 55000
[2024-12-27 10:42:21.253] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:42:21.254] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:42:21.254] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:42:21.255] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:42:21.260] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:42:21.261] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 10:42:21.261] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:42:21.262] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 10:42:21.262] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:42:21.263] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 10:42:21.269] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:42:21.270] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 10:42:21.270] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:42:21.271] [INF] Product: Espresso, Price: 55000, Size: Size01    
[2024-12-27 10:42:21.271] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 10:42:21.272] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:42:21.273] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 10:42:29.984] [INF] Attempting to remove product: SP011     
[2024-12-27 10:42:34.319] [INF] Attempting to remove product: SP001     
[2024-12-27 10:42:34.523] [INF] Attempting to remove product: SP001     
[2024-12-27 10:42:36.049] [INF] Attempting to remove product: SP011     
[2024-12-27 10:42:36.945] [INF] Attempting to remove product: SP004     
[2024-12-27 10:42:37.688] [INF] Attempting to remove product: SP013     
[2024-12-27 10:42:37.820] [INF] Attempting to remove product: SP013     
[2024-12-27 10:42:39.169] [INF] Attempting to remove product: SP012     
[2024-12-27 10:42:41.010] [INF] Access Login Page
[2024-12-27 10:42:42.150] [INF] Login successful
[2024-12-27 10:42:42.167] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:42:46.013] [INF] Product Cappuccino price: 55000
[2024-12-27 10:42:46.016] [INF] Product Cappuccino price: 55000
[2024-12-27 10:42:46.504] [INF] Product Cappuccino price: 55000
[2024-12-27 10:42:46.504] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:42:46.506] [INF] Product Cappuccino price: 55000
[2024-12-27 10:42:46.507] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:42:48.395] [INF] Access Login Page
[2024-12-27 10:42:58.878] [INF] Access Login Page
[2024-12-27 10:43:01.363] [INF] Login successful
[2024-12-27 10:43:03.714] [INF] Product Cappuccino price: 55000
[2024-12-27 10:43:03.715] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:43:03.717] [INF] Product Cappuccino price: 55000
[2024-12-27 10:43:03.718] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:43:03.722] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:43:03.722] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 10:43:03.723] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:43:03.738] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:43:03.739] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 10:43:03.740] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 10:43:03.740] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 10:43:03.741] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:43:13.147] [INF] Product Cappuccino price: 55000
[2024-12-27 10:43:13.148] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:43:13.148] [INF] Product Cappuccino price: 55000
[2024-12-27 10:43:13.149] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:43:13.151] [INF] Product Cappuccino price: 55000
[2024-12-27 10:43:13.152] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:43:13.152] [INF] Product Cappuccino price: 55000
[2024-12-27 10:43:13.153] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:43:13.156] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:43:13.157] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 10:43:13.157] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 10:43:13.158] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 10:43:13.159] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:43:20.421] [INF] Attempting to remove product: SP001     
[2024-12-27 10:43:23.975] [INF] Attempting to remove product: SP011     
[2024-12-27 10:44:58.072] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:44:58.083] [INF] Product Cappuccino price: 55000
[2024-12-27 10:44:58.121] [INF] Product Cookie Freeze price: 60000
[2024-12-27 10:44:58.136] [INF] Product Cappuccino price: 55000
[2024-12-27 10:44:58.224] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:44:58.228] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 10:44:58.230] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 10:46:13.757] [WRN] Failed to determine the https port for redirect.
[2024-12-27 10:46:14.490] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 10:50:23.134] [WRN] Failed to determine the https port for redirect.
[2024-12-27 10:50:23.640] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 10:51:12.239] [INF] Access Login Page
[2024-12-27 10:51:32.689] [INF] Access Login Page
[2024-12-27 10:51:39.139] [INF] Login successful
[2024-12-27 10:51:39.303] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:51:39.306] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:51:39.321] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 10:51:39.327] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:51:39.328] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:51:45.344] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:51:45.345] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:51:45.347] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:51:45.348] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:51:45.872] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:51:45.872] [INF] Product Espresso price: 55000
[2024-12-27 10:51:45.873] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:51:45.877] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:51:45.879] [INF] Product Espresso price: 55000
[2024-12-27 10:51:45.880] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:51:46.369] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:51:46.370] [INF] Product Latte price: 55000
[2024-12-27 10:51:46.371] [INF] Product Espresso price: 55000
[2024-12-27 10:51:46.371] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:51:46.373] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:51:46.374] [INF] Product Latte price: 55000
[2024-12-27 10:51:46.374] [INF] Product Espresso price: 55000
[2024-12-27 10:51:46.375] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:51:47.800] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:51:47.801] [INF] Product Latte price: 55000
[2024-12-27 10:51:47.801] [INF] Product Espresso price: 55000
[2024-12-27 10:51:47.802] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:51:47.804] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:51:47.805] [INF] Product Latte price: 55000
[2024-12-27 10:51:47.805] [INF] Product Espresso price: 55000
[2024-12-27 10:51:47.806] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:51:47.812] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:51:47.813] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:51:47.814] [INF] Product: Latte, Price: 55000, Size: Size01    
[2024-12-27 10:51:47.814] [INF] Product: Espresso, Price: 55000, Size: Size01    
[2024-12-27 10:51:47.815] [INF] Product: Caramel Machiato, Price: 55000, Size: Size01    
[2024-12-27 10:51:59.913] [INF] Access Login Page
[2024-12-27 10:52:00.997] [INF] Login successful
[2024-12-27 10:52:01.007] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:01.008] [INF] Product Latte price: 55000
[2024-12-27 10:52:01.009] [INF] Product Espresso price: 55000
[2024-12-27 10:52:01.009] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:01.011] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:01.012] [INF] Product Latte price: 55000
[2024-12-27 10:52:01.012] [INF] Product Espresso price: 55000
[2024-12-27 10:52:01.013] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:01.017] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:52:01.017] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:52:01.018] [INF] Product: Latte, Price: 55000, Size: Size01    
[2024-12-27 10:52:01.018] [INF] Product: Espresso, Price: 55000, Size: Size01    
[2024-12-27 10:52:01.019] [INF] Product: Caramel Machiato, Price: 55000, Size: Size01    
[2024-12-27 10:52:04.956] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:04.957] [INF] Product Latte price: 55000
[2024-12-27 10:52:04.957] [INF] Product Espresso price: 55000
[2024-12-27 10:52:04.958] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:04.960] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:04.961] [INF] Product Latte price: 55000
[2024-12-27 10:52:04.962] [INF] Product Espresso price: 55000
[2024-12-27 10:52:04.962] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:05.136] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:05.138] [INF] Product Latte price: 55000
[2024-12-27 10:52:05.138] [INF] Product Espresso price: 55000
[2024-12-27 10:52:05.139] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:05.141] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:05.142] [INF] Product Latte price: 55000
[2024-12-27 10:52:05.142] [INF] Product Espresso price: 55000
[2024-12-27 10:52:05.143] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:05.236] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:05.237] [INF] Product Latte price: 55000
[2024-12-27 10:52:05.237] [INF] Product Espresso price: 55000
[2024-12-27 10:52:05.238] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:05.240] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:05.240] [INF] Product Latte price: 55000
[2024-12-27 10:52:05.241] [INF] Product Espresso price: 55000
[2024-12-27 10:52:05.241] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:05.381] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:05.382] [INF] Product Latte price: 55000
[2024-12-27 10:52:05.382] [INF] Product Espresso price: 55000
[2024-12-27 10:52:05.383] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:05.385] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:05.385] [INF] Product Latte price: 55000
[2024-12-27 10:52:05.386] [INF] Product Espresso price: 55000
[2024-12-27 10:52:05.386] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:05.522] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:05.523] [INF] Product Latte price: 55000
[2024-12-27 10:52:05.523] [INF] Product Espresso price: 55000
[2024-12-27 10:52:05.523] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:05.525] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:05.526] [INF] Product Latte price: 55000
[2024-12-27 10:52:05.526] [INF] Product Espresso price: 55000
[2024-12-27 10:52:05.527] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:05.660] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:05.661] [INF] Product Latte price: 55000
[2024-12-27 10:52:05.661] [INF] Product Espresso price: 55000
[2024-12-27 10:52:05.662] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:05.664] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:05.664] [INF] Product Latte price: 55000
[2024-12-27 10:52:05.665] [INF] Product Espresso price: 55000
[2024-12-27 10:52:05.665] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:05.816] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:05.816] [INF] Product Latte price: 55000
[2024-12-27 10:52:05.817] [INF] Product Espresso price: 55000
[2024-12-27 10:52:05.817] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:05.819] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:05.820] [INF] Product Latte price: 55000
[2024-12-27 10:52:05.820] [INF] Product Espresso price: 55000
[2024-12-27 10:52:05.821] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:05.957] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:05.958] [INF] Product Latte price: 55000
[2024-12-27 10:52:05.958] [INF] Product Espresso price: 55000
[2024-12-27 10:52:05.959] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:05.961] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:05.961] [INF] Product Latte price: 55000
[2024-12-27 10:52:05.962] [INF] Product Espresso price: 55000
[2024-12-27 10:52:05.963] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:07.695] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:07.695] [INF] Product Latte price: 55000
[2024-12-27 10:52:07.696] [INF] Product Espresso price: 55000
[2024-12-27 10:52:07.696] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:07.699] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 10:52:07.699] [INF] Product Latte price: 55000
[2024-12-27 10:52:07.700] [INF] Product Espresso price: 55000
[2024-12-27 10:52:07.700] [INF] Product Caramel Machiato price: 55000
[2024-12-27 10:52:07.741] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:52:07.743] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 10:52:07.743] [INF] Product: Latte, Price: 55000, Size: Size01    
[2024-12-27 10:52:07.744] [INF] Product: Espresso, Price: 55000, Size: Size01    
[2024-12-27 10:52:07.744] [INF] Product: Caramel Machiato, Price: 55000, Size: Size01    
[2024-12-27 10:52:15.245] [INF] Access Login Page
[2024-12-27 10:52:25.552] [INF] Access Login Page
[2024-12-27 10:52:26.564] [INF] Login successful
[2024-12-27 10:52:26.603] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:52:26.603] [INF] Product Espresso price: 55000
[2024-12-27 10:52:26.604] [INF] Product Latte price: 55000
[2024-12-27 10:52:26.606] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:52:26.606] [INF] Product Espresso price: 55000
[2024-12-27 10:52:26.607] [INF] Product Latte price: 55000
[2024-12-27 10:52:26.611] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:52:26.611] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 10:52:26.612] [INF] Product: Espresso, Price: 55000, Size: Size01    
[2024-12-27 10:52:26.612] [INF] Product: Latte, Price: 55000, Size: Size01    
[2024-12-27 10:52:30.965] [INF] Access Login Page
[2024-12-27 10:52:45.771] [INF] Access Login Page
[2024-12-27 10:52:47.098] [INF] Login successful
[2024-12-27 10:52:48.963] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:52:53.361] [INF] Access Login Page
[2024-12-27 10:53:09.002] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:53:09.166] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:53:09.277] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:53:09.278] [INF] Product Latte price: 55000
[2024-12-27 10:53:09.280] [INF] Product Freeze Choco price: 60000
[2024-12-27 10:53:09.281] [INF] Product Latte price: 55000
[2024-12-27 10:53:09.283] [INF] Found cart for user khnguyenne: True
[2024-12-27 10:53:09.285] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 10:53:09.285] [INF] Product: Latte, Price: 55000, Size: Size01    
[2024-12-27 10:53:11.993] [INF] Access Login Page
[2024-12-27 10:53:29.991] [INF] Access Login Page
[2024-12-27 10:53:31.711] [INF] Login successful
[2024-12-27 10:53:41.766] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:53:43.706] [INF] Access Login Page
[2024-12-27 10:54:04.827] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:54:08.759] [INF] Access Login Page
[2024-12-27 10:54:14.495] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 10:54:18.604] [INF] Access Login Page
[2024-12-27 11:03:34.986] [ERR] Error in Checkout: Unable to track an entity of type 'ShoppingCart' because its primary key property 'Cart_id' is null.
[2024-12-27 11:03:40.634] [INF] Access Login Page
[2024-12-27 11:03:54.399] [INF] Access Login Page
[2024-12-27 11:04:16.787] [INF] Access Login Page
[2024-12-27 11:04:17.943] [INF] Login successful
[2024-12-27 11:04:32.421] [INF] Access Login Page
[2024-12-27 11:05:24.329] [INF] Access Login Page
[2024-12-27 11:05:25.274] [INF] Login successful
[2024-12-27 11:05:25.302] [INF] Product Espresso price: 55000
[2024-12-27 11:05:25.304] [INF] Product Espresso price: 55000
[2024-12-27 11:05:25.307] [INF] Found cart for user khnguyenne: True
[2024-12-27 11:05:25.308] [INF] Product: Espresso, Price: 55000, Size: Size01    
[2024-12-27 11:07:08.595] [WRN] Failed to determine the https port for redirect.
[2024-12-27 11:07:09.133] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 11:13:17.834] [INF] Product Espresso price: 55000
[2024-12-27 11:13:17.841] [INF] Product Espresso price: 55000
[2024-12-27 11:13:17.875] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 11:13:17.881] [INF] Found cart for user khnguyenne: True
[2024-12-27 11:13:17.882] [INF] Product: Espresso, Price: 55000, Size: Size01    
[2024-12-27 11:13:26.013] [INF] Access Login Page
[2024-12-27 11:13:27.491] [INF] Login successful
[2024-12-27 11:13:27.505] [INF] Product Espresso price: 55000
[2024-12-27 11:13:27.507] [INF] Product Espresso price: 55000
[2024-12-27 11:13:27.511] [INF] Found cart for user khnguyenne: True
[2024-12-27 11:13:27.511] [INF] Product: Espresso, Price: 55000, Size: Size01    
[2024-12-27 11:13:32.302] [WRN] Failed to determine the https port for redirect.
[2024-12-27 11:13:33.155] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 11:13:43.403] [INF] Access Login Page
[2024-12-27 11:13:59.620] [INF] Access Login Page
[2024-12-27 11:14:00.593] [INF] Login successful
[2024-12-27 11:14:08.738] [ERR] Failed executing DbCommand (16ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = Double), @p16='?' (Size = 450), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p31='?' (Size = 10), @p17='?' (Size = 10), @p18='?' (Size = 50), @p19='?' (Size = 50), @p20='?' (DbType = DateTime2), @p21='?' (Size = 500), @p22='?' (DbType = Double), @p23='?' (DbType = DateTime2), @p24='?' (DbType = Double), @p25='?' (DbType = Double), @p26='?' (Size = 100), @p27='?' (DbType = Boolean), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (Size = 20), @p32='?' (Size = 450), @p33='?' (Size = 10), @p34='?' (DbType = DateTime2), @p35='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bill] ([Bill_id], [Client_id], [Contact], [Date], [DeleteStatus], [Location], [OrderNotes], [PaymentMethod], [PaymentStatus], [ProcessDate], [Status], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Client] SET [Contact] = @p12, [Gmail] = @p13, [Location] = @p14, [Name] = @p15
OUTPUT 1
WHERE [Client_id] = @p16;
UPDATE [Voucher] SET [Brand_id] = @p17, [Code] = @p18, [CreatedBy] = @p19, [CreatedDate] = @p20, [Description] = @p21, [Detail] = @p22, [ExpirationDate] = @p23, [MaximumDiscount] = @p24, [MinimumSpend] = @p25, [Name] = @p26, [Status] = @p27, [UsageCount] = @p28, [UsageLimit] = @p29, [VoucherType] = @p30
OUTPUT 1
WHERE [Voucher_id] = @p31;
INSERT INTO [Bill_Voucher] ([Bill_id], [Voucher_id], [AppliedDate], [DiscountAmount])
VALUES (@p32, @p33, @p34, @p35);
[2024-12-27 11:14:08.758] [ERR] An exception occurred in the database while saving changes for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL107   ).
Violation of PRIMARY KEY constraint 'PK_HoaDon_Voucher'. Cannot insert duplicate key in object 'dbo.Bill_Voucher'. The duplicate key value is (VC001     , BILL107   ).
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:08d4573c-c71a-479c-8778-24d36684bd9f
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL107   ).
Violation of PRIMARY KEY constraint 'PK_HoaDon_Voucher'. Cannot insert duplicate key in object 'dbo.Bill_Voucher'. The duplicate key value is (VC001     , BILL107   ).
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:08d4573c-c71a-479c-8778-24d36684bd9f
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2024-12-27 11:14:08.835] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 11:22:42.339] [WRN] Failed to determine the https port for redirect.
[2024-12-27 11:22:43.011] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 11:22:51.390] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 11:28:52.765] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 11:28:52.774] [INF] Found cart for user khnguyenne: True
[2024-12-27 11:28:58.405] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 11:28:58.413] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 11:29:00.141] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 11:29:00.145] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 11:29:00.152] [INF] Found cart for user khnguyenne: True
[2024-12-27 11:29:00.153] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 11:40:00.049] [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Multiple constructors accepting all given argument types have been found in type 'DemoApp_Test.Controllers.HomeController'. There should only be one applicable constructor.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.TryFindMatchingConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfo& matchingConstructor, Nullable`1[]& parameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactoryInternal(Type instanceType, Type[] argumentTypes, ParameterExpression& provider, ParameterExpression& argumentArray, Expression& factoryExpressionBody)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.CreateActivator(ControllerActionDescriptor descriptor)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.CreateControllerFactory(ControllerActionDescriptor descriptor)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvokerCache.GetCachedResult(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Routing.ControllerRequestDelegateFactory.<>c__DisplayClass12_0.<CreateRequestDelegate>b__0(HttpContext context)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2024-12-27 11:41:43.864] [WRN] Failed to determine the https port for redirect.
[2024-12-27 11:41:44.982] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 11:43:20.342] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 11:43:20.358] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 11:43:20.426] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 11:43:20.439] [INF] Found cart for user khnguyenne: True
[2024-12-27 11:43:20.441] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 11:43:25.253] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 11:44:52.791] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 11:44:52.794] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 11:44:54.197] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 11:44:54.200] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 11:44:54.206] [INF] Found cart for user khnguyenne: True
[2024-12-27 11:44:54.207] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 11:50:05.409] [INF] Product Cookie Freeze price: 60000
[2024-12-27 11:50:05.412] [INF] Product Cookie Freeze price: 60000
[2024-12-27 11:50:07.086] [INF] Product Cookie Freeze price: 60000
[2024-12-27 11:50:07.089] [INF] Product Cookie Freeze price: 60000
[2024-12-27 11:50:07.098] [INF] Found cart for user khnguyenne: True
[2024-12-27 11:50:07.098] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 11:50:48.015] [WRN] Failed to determine the https port for redirect.
[2024-12-27 11:50:48.476] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 11:51:17.442] [INF] Product Cookie Freeze price: 60000
[2024-12-27 11:51:17.446] [INF] Product Cookie Freeze price: 60000
[2024-12-27 11:51:17.471] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 11:51:17.478] [INF] Found cart for user khnguyenne: True
[2024-12-27 11:51:17.479] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 11:51:18.944] [INF] Product Cookie Freeze price: 60000
[2024-12-27 11:51:18.947] [INF] Product Cookie Freeze price: 60000
[2024-12-27 11:51:18.951] [INF] Found cart for user khnguyenne: True
[2024-12-27 11:51:18.951] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 11:56:39.100] [ERR] An unhandled exception has occurred while executing the request.
[2024-12-27 11:56:39.122] [ERR] An exception was thrown attempting to display the error page.
System.TypeLoadException: Could not resolve type 'AspNetCoreGeneratedDocument.Views_Home_Checkout' in assembly 'DemoApp_Test, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'.
   at System.Reflection.TypeNameParser.GetTypeFromDefaultAssemblies(String typeName, ReadOnlySpan`1 nestedTypeNames)
   at System.Reflection.TypeNameParser.GetType(String typeName, ReadOnlySpan`1 nestedTypeNames, String assemblyNameIfAny)
   at System.Reflection.TypeNameParser.NestedNamespaceTypeName.ResolveType(TypeNameParser& parser, String containingAssemblyIfAny)
   at System.Reflection.TypeNameParser.GetTypeHelper(Char* pTypeName, RuntimeAssembly requestingAssembly, Boolean throwOnError, Boolean requireAssemblyQualifiedName)
   at System.Reflection.CustomAttribute._CreateCaObject(RuntimeModule pModule, RuntimeType type, IRuntimeMethodInfo pCtor, Byte** ppBlob, Byte* pEndBlob, Int32* pcNamedArgs)
   at System.Reflection.CustomAttribute.AddCustomAttributes(ListBuilder`1& attributes, RuntimeModule decoratedModule, Int32 decoratedMetadataToken, RuntimeType attributeFilterType, Boolean mustBeInheritable, ListBuilder`1 derivedAttributes)
   at System.Reflection.CustomAttribute.GetCustomAttributes(RuntimeMethodInfo method, RuntimeType caType, Boolean inherit)
   at System.Attribute.GetCustomAttributes(MemberInfo element, Type attributeType, Boolean inherit)
   at System.Reflection.CustomAttributeExtensions.GetCustomAttributes[T](MemberInfo element)
   at Microsoft.Extensions.StackTrace.Sources.StackTraceHelper.TryResolveStateMachineMethod(MethodBase& method, Type& declaringType)
   at Microsoft.Extensions.StackTrace.Sources.StackTraceHelper.GetMethodDisplayString(MethodBase method)
   at Microsoft.Extensions.StackTrace.Sources.StackTraceHelper.GetFrames(Exception exception, AggregateException& error)
   at Microsoft.Extensions.StackTrace.Sources.ExceptionDetailsProvider.GetStackFrames(Exception original)
   at Microsoft.Extensions.StackTrace.Sources.ExceptionDetailsProvider.GetDetails(Exception exception)+MoveNext()
   at Microsoft.AspNetCore.Diagnostics.RazorViews.ErrorPage.ExecuteAsync()
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2024-12-27 11:59:44.511] [WRN] Failed to determine the https port for redirect.
[2024-12-27 11:59:45.024] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 11:59:48.767] [INF] Product Cookie Freeze price: 60000
[2024-12-27 11:59:48.773] [INF] Product Cookie Freeze price: 60000
[2024-12-27 11:59:48.813] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 11:59:48.819] [INF] Found cart for user khnguyenne: True
[2024-12-27 11:59:48.820] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 12:08:32.121] [WRN] Failed to determine the https port for redirect.
[2024-12-27 12:08:32.799] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 12:08:36.365] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:08:36.369] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:08:36.395] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 12:08:36.402] [INF] Found cart for user khnguyenne: True
[2024-12-27 12:08:36.403] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 12:16:11.767] [ERR] An unhandled exception has occurred while executing the request.
[2024-12-27 12:16:11.792] [ERR] An exception was thrown attempting to display the error page.
System.TypeLoadException: Could not resolve type 'AspNetCoreGeneratedDocument.Views_Home_Checkout' in assembly 'DemoApp_Test, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'.
   at System.Reflection.TypeNameParser.GetTypeFromDefaultAssemblies(String typeName, ReadOnlySpan`1 nestedTypeNames)
   at System.Reflection.TypeNameParser.GetType(String typeName, ReadOnlySpan`1 nestedTypeNames, String assemblyNameIfAny)
   at System.Reflection.TypeNameParser.NestedNamespaceTypeName.ResolveType(TypeNameParser& parser, String containingAssemblyIfAny)
   at System.Reflection.TypeNameParser.GetTypeHelper(Char* pTypeName, RuntimeAssembly requestingAssembly, Boolean throwOnError, Boolean requireAssemblyQualifiedName)
   at System.Reflection.CustomAttribute._CreateCaObject(RuntimeModule pModule, RuntimeType type, IRuntimeMethodInfo pCtor, Byte** ppBlob, Byte* pEndBlob, Int32* pcNamedArgs)
   at System.Reflection.CustomAttribute.AddCustomAttributes(ListBuilder`1& attributes, RuntimeModule decoratedModule, Int32 decoratedMetadataToken, RuntimeType attributeFilterType, Boolean mustBeInheritable, ListBuilder`1 derivedAttributes)
   at System.Reflection.CustomAttribute.GetCustomAttributes(RuntimeMethodInfo method, RuntimeType caType, Boolean inherit)
   at System.Attribute.GetCustomAttributes(MemberInfo element, Type attributeType, Boolean inherit)
   at System.Reflection.CustomAttributeExtensions.GetCustomAttributes[T](MemberInfo element)
   at Microsoft.Extensions.StackTrace.Sources.StackTraceHelper.TryResolveStateMachineMethod(MethodBase& method, Type& declaringType)
   at Microsoft.Extensions.StackTrace.Sources.StackTraceHelper.GetMethodDisplayString(MethodBase method)
   at Microsoft.Extensions.StackTrace.Sources.StackTraceHelper.GetFrames(Exception exception, AggregateException& error)
   at Microsoft.Extensions.StackTrace.Sources.ExceptionDetailsProvider.GetStackFrames(Exception original)
   at Microsoft.Extensions.StackTrace.Sources.ExceptionDetailsProvider.GetDetails(Exception exception)+MoveNext()
   at Microsoft.AspNetCore.Diagnostics.RazorViews.ErrorPage.ExecuteAsync()
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2024-12-27 12:22:30.232] [WRN] Failed to determine the https port for redirect.
[2024-12-27 12:22:31.259] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 12:22:46.375] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:22:46.379] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:22:46.405] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 12:22:46.411] [INF] Found cart for user khnguyenne: True
[2024-12-27 12:22:46.413] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 12:22:50.468] [ERR] Failed executing DbCommand (34ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = Double), @p16='?' (Size = 450), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bill] ([Bill_id], [Client_id], [Contact], [Date], [DeleteStatus], [Location], [OrderNotes], [PaymentMethod], [PaymentStatus], [ProcessDate], [Status], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Client] SET [Contact] = @p12, [Gmail] = @p13, [Location] = @p14, [Name] = @p15
OUTPUT 1
WHERE [Client_id] = @p16;
[2024-12-27 12:22:50.583] [ERR] An exception occurred in the database while saving changes for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL111   ).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7ec5b7da-c826-4f19-a58a-0fd90bae8685
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL111   ).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7ec5b7da-c826-4f19-a58a-0fd90bae8685
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2024-12-27 12:22:50.763] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 12:22:52.604] [INF] Found cart for user khnguyenne: True
[2024-12-27 12:22:58.943] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:22:58.946] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:23:00.344] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:23:00.347] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:23:00.351] [INF] Found cart for user khnguyenne: True
[2024-12-27 12:23:00.352] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 12:23:03.640] [ERR] Failed executing DbCommand (4ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = Double), @p16='?' (Size = 450), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bill] ([Bill_id], [Client_id], [Contact], [Date], [DeleteStatus], [Location], [OrderNotes], [PaymentMethod], [PaymentStatus], [ProcessDate], [Status], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Client] SET [Contact] = @p12, [Gmail] = @p13, [Location] = @p14, [Name] = @p15
OUTPUT 1
WHERE [Client_id] = @p16;
[2024-12-27 12:23:03.646] [ERR] An exception occurred in the database while saving changes for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL112   ).
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7ec5b7da-c826-4f19-a58a-0fd90bae8685
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL112   ).
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7ec5b7da-c826-4f19-a58a-0fd90bae8685
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2024-12-27 12:23:07.223] [INF] Found cart for user khnguyenne: True
[2024-12-27 12:23:21.613] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:23:21.617] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:23:22.701] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:23:22.704] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:23:22.709] [INF] Found cart for user khnguyenne: True
[2024-12-27 12:23:22.710] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 12:23:26.626] [ERR] Failed executing DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = Double), @p16='?' (Size = 450), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bill] ([Bill_id], [Client_id], [Contact], [Date], [DeleteStatus], [Location], [OrderNotes], [PaymentMethod], [PaymentStatus], [ProcessDate], [Status], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Client] SET [Contact] = @p12, [Gmail] = @p13, [Location] = @p14, [Name] = @p15
OUTPUT 1
WHERE [Client_id] = @p16;
[2024-12-27 12:23:26.630] [ERR] An exception occurred in the database while saving changes for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL113   ).
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:dd350e26-5ae0-4e86-869d-73dab778d79a
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL113   ).
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:dd350e26-5ae0-4e86-869d-73dab778d79a
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2024-12-27 12:23:33.137] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:23:33.139] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:23:33.773] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:23:33.773] [INF] Product Freeze Choco price: 60000
[2024-12-27 12:23:33.777] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:23:33.778] [INF] Product Freeze Choco price: 60000
[2024-12-27 12:23:35.156] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:23:35.157] [INF] Product Freeze Choco price: 60000
[2024-12-27 12:23:35.160] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:23:35.160] [INF] Product Freeze Choco price: 60000
[2024-12-27 12:23:35.165] [INF] Found cart for user khnguyenne: True
[2024-12-27 12:23:35.166] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 12:23:35.166] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 12:23:39.450] [ERR] Failed executing DbCommand (139ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = Double), @p16='?' (Size = 450), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bill] ([Bill_id], [Client_id], [Contact], [Date], [DeleteStatus], [Location], [OrderNotes], [PaymentMethod], [PaymentStatus], [ProcessDate], [Status], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Client] SET [Contact] = @p12, [Gmail] = @p13, [Location] = @p14, [Name] = @p15
OUTPUT 1
WHERE [Client_id] = @p16;
[2024-12-27 12:23:39.457] [ERR] An exception occurred in the database while saving changes for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL114   ).
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:dd350e26-5ae0-4e86-869d-73dab778d79a
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL114   ).
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:dd350e26-5ae0-4e86-869d-73dab778d79a
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2024-12-27 12:23:41.769] [INF] Found cart for user khnguyenne: True
[2024-12-27 12:24:42.796] [INF] Found cart for user khnguyenne: True
[2024-12-27 12:24:55.762] [INF] Found cart for user khnguyenne: True
[2024-12-27 12:25:10.013] [INF] Found cart for user khnguyenne: True
[2024-12-27 12:25:18.899] [INF] Found cart for user khnguyenne: True
[2024-12-27 12:25:25.339] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:25:25.342] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:25:26.575] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:25:26.577] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:25:26.581] [INF] Found cart for user khnguyenne: True
[2024-12-27 12:25:26.582] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 12:25:32.601] [ERR] Failed executing DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = Double), @p16='?' (Size = 450), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bill] ([Bill_id], [Client_id], [Contact], [Date], [DeleteStatus], [Location], [OrderNotes], [PaymentMethod], [PaymentStatus], [ProcessDate], [Status], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Client] SET [Contact] = @p12, [Gmail] = @p13, [Location] = @p14, [Name] = @p15
OUTPUT 1
WHERE [Client_id] = @p16;
[2024-12-27 12:25:32.606] [ERR] An exception occurred in the database while saving changes for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL115   ).
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7ec5b7da-c826-4f19-a58a-0fd90bae8685
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL115   ).
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:7ec5b7da-c826-4f19-a58a-0fd90bae8685
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2024-12-27 12:25:35.201] [INF] Found cart for user khnguyenne: True
[2024-12-27 12:26:14.360] [WRN] Failed to determine the https port for redirect.
[2024-12-27 12:26:14.950] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 12:26:37.333] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:26:37.350] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:26:37.847] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:26:37.850] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:26:37.874] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 12:26:37.881] [INF] Found cart for user khnguyenne: True
[2024-12-27 12:26:37.882] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 12:26:42.200] [ERR] Failed executing DbCommand (17ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = Double), @p16='?' (Size = 450), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bill] ([Bill_id], [Client_id], [Contact], [Date], [DeleteStatus], [Location], [OrderNotes], [PaymentMethod], [PaymentStatus], [ProcessDate], [Status], [Total])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Client] SET [Contact] = @p12, [Gmail] = @p13, [Location] = @p14, [Name] = @p15
OUTPUT 1
WHERE [Client_id] = @p16;
[2024-12-27 12:26:42.221] [ERR] An exception occurred in the database while saving changes for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL116   ).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0603efad-7dcb-470c-ac83-d6e6b349f0ca
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_HoaDon'. Cannot insert duplicate key in object 'dbo.Bill'. The duplicate key value is (BILL116   ).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0603efad-7dcb-470c-ac83-d6e6b349f0ca
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2024-12-27 12:26:42.294] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 12:29:45.814] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:29:45.817] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:29:46.482] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:29:46.483] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:29:46.488] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:29:46.490] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:29:47.460] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:29:47.461] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:29:47.464] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:29:47.464] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:29:47.469] [INF] Found cart for user khnguyenne: True
[2024-12-27 12:29:47.470] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 12:29:47.471] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 12:30:16.425] [WRN] Failed to determine the https port for redirect.
[2024-12-27 12:30:17.175] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 12:30:21.778] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:30:21.780] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:30:21.786] [INF] Product Cookie Freeze price: 60000
[2024-12-27 12:30:21.786] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 12:30:21.841] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 12:30:21.851] [INF] Found cart for user khnguyenne: True
[2024-12-27 12:30:21.853] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 12:30:21.853] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 12:32:46.061] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 18:05:19.032] [WRN] Failed to determine the https port for redirect.
[2024-12-27 18:05:20.046] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 18:09:34.374] [WRN] Failed to determine the https port for redirect.
[2024-12-27 18:09:35.567] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 18:09:43.558] [INF] Access Login Page
[2024-12-27 18:09:44.904] [INF] Login successful
[2024-12-27 18:10:13.923] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 18:10:13.930] [INF] Found cart for user khnguyenne: True
[2024-12-27 18:10:18.661] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 18:10:18.664] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 18:10:19.699] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 18:10:19.702] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 18:10:19.708] [INF] Found cart for user khnguyenne: True
[2024-12-27 18:10:19.709] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 18:11:00.440] [ERR] Error sending verification email: An existing connection was forcibly closed by the remote host.
[2024-12-27 18:11:00.440] [ERR] Error sending verification email: An existing connection was forcibly closed by the remote host.
[2024-12-27 18:11:37.211] [WRN] Failed to determine the https port for redirect.
[2024-12-27 18:11:37.735] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 18:12:11.197] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 18:12:11.202] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 18:12:11.226] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 18:12:11.233] [INF] Found cart for user khnguyenne: True
[2024-12-27 18:12:11.234] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 18:19:00.779] [WRN] Failed to determine the https port for redirect.
[2024-12-27 18:19:01.470] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 18:19:15.126] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 18:19:15.130] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 18:19:16.959] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 18:19:16.963] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 18:19:16.991] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 18:19:16.999] [INF] Found cart for user khnguyenne: True
[2024-12-27 18:19:17.000] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 18:22:20.988] [WRN] Failed to determine the https port for redirect.
[2024-12-27 18:22:21.656] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 18:22:26.165] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 18:22:26.173] [INF] Found cart for user khnguyenne: True
[2024-12-27 18:22:32.077] [INF] Product Cappuccino price: 55000
[2024-12-27 18:22:32.083] [INF] Product Cappuccino price: 55000
[2024-12-27 18:22:33.207] [INF] Product Cappuccino price: 55000
[2024-12-27 18:22:33.212] [INF] Product Cappuccino price: 55000
[2024-12-27 18:22:33.220] [INF] Found cart for user khnguyenne: True
[2024-12-27 18:22:33.222] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 18:24:17.526] [WRN] Failed to determine the https port for redirect.
[2024-12-27 18:24:18.247] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 18:24:38.543] [INF] Product Cappuccino price: 55000
[2024-12-27 18:24:38.548] [INF] Product Cappuccino price: 55000
[2024-12-27 18:24:38.575] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 18:24:38.583] [INF] Found cart for user khnguyenne: True
[2024-12-27 18:24:38.584] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 18:32:06.202] [WRN] Failed to determine the https port for redirect.
[2024-12-27 18:32:07.016] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 18:32:46.049] [INF] Product Cappuccino price: 55000
[2024-12-27 18:32:46.054] [INF] Product Cappuccino price: 55000
[2024-12-27 18:32:47.485] [INF] Product Cappuccino price: 55000
[2024-12-27 18:32:47.488] [INF] Product Cappuccino price: 55000
[2024-12-27 18:32:47.510] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 18:32:47.518] [INF] Found cart for user khnguyenne: True
[2024-12-27 18:32:47.519] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 18:33:06.543] [ERR] Error sending verification email: No such host is known.
[2024-12-27 18:33:43.751] [ERR] Error sending verification email: No such host is known.
[2024-12-27 18:36:13.802] [WRN] Failed to determine the https port for redirect.
[2024-12-27 18:36:15.469] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 18:36:33.055] [ERR] An error occurred using the connection to database 'QLCoffeeShop' on server 'NHDANDZ\NHDANDZ'.
[2024-12-27 18:36:33.265] [ERR] An exception occurred while iterating over the results of a query for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
[2024-12-27 18:36:33.405] [ERR] Error in UpdateCartInfo: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
[2024-12-27 18:36:33.491] [ERR] An error occurred using the connection to database 'QLCoffeeShop' on server 'NHDANDZ\NHDANDZ'.
[2024-12-27 18:36:33.494] [ERR] An exception occurred while iterating over the results of a query for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
[2024-12-27 18:36:33.612] [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at DemoApp_Test.Repository.Components.CategoriesSaleViewComponent.InvokeAsync() in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Repository\Components\CategoriesSaleViewComponent.cs:line 15
   at Microsoft.AspNetCore.Mvc.ViewComponents.DefaultViewComponentInvoker.InvokeAsyncCore(ObjectMethodExecutor executor, Object component, ViewComponentContext context)
   at Microsoft.AspNetCore.Mvc.ViewComponents.DefaultViewComponentInvoker.InvokeAsync(ViewComponentContext context)
   at Microsoft.AspNetCore.Mvc.ViewComponents.DefaultViewComponentInvoker.InvokeAsync(ViewComponentContext context)
   at Microsoft.AspNetCore.Mvc.ViewComponents.DefaultViewComponentHelper.InvokeCoreAsync(ViewComponentDescriptor descriptor, Object arguments)
   at AspNetCoreGeneratedDocument.Views_Home_Index.ExecuteAsync() in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Views\Home\Index.cshtml:line 3
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Program.cs:line 89
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
[2024-12-27 18:37:05.178] [INF] Product Cappuccino price: 55000
[2024-12-27 18:37:05.183] [INF] Product Cappuccino price: 55000
[2024-12-27 18:37:05.212] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 18:37:05.267] [INF] Found cart for user khnguyenne: True
[2024-12-27 18:37:05.269] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 18:38:51.796] [ERR] Error sending verification email: The SMTP server has unexpectedly disconnected: 2.0.0 Ready to start TLS
[2024-12-27 18:40:19.906] [ERR] Error sending verification email: An existing connection was forcibly closed by the remote host.
[2024-12-27 18:40:40.796] [ERR] Error sending verification email: The SMTP server has unexpectedly disconnected: 2.0.0 Ready to start TLS
[2024-12-27 18:42:19.408] [WRN] Failed to determine the https port for redirect.
[2024-12-27 18:42:19.929] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 20:06:39.941] [INF] Access Login Page
[2024-12-27 20:06:41.006] [INF] Login successful
[2024-12-27 20:06:43.919] [INF] Product Cappuccino price: 55000
[2024-12-27 20:06:43.921] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:06:43.924] [INF] Product Cappuccino price: 55000
[2024-12-27 20:06:43.925] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:06:45.380] [INF] Product Cappuccino price: 55000
[2024-12-27 20:06:45.381] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:06:45.384] [INF] Product Cappuccino price: 55000
[2024-12-27 20:06:45.385] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:06:45.407] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 20:06:45.451] [INF] Found cart for user khnguyenne: True
[2024-12-27 20:06:45.452] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 20:06:45.452] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 20:08:45.768] [WRN] Failed to determine the https port for redirect.
[2024-12-27 20:08:46.679] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 20:10:58.527] [INF] Product Cappuccino price: 55000
[2024-12-27 20:10:58.527] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:10:58.531] [INF] Product Cappuccino price: 55000
[2024-12-27 20:10:58.532] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:10:58.552] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 20:10:58.595] [INF] Found cart for user khnguyenne: True
[2024-12-27 20:10:58.596] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 20:10:58.597] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 20:11:56.995] [ERR] Error in VerifyOrderCode: 'Microsoft.AspNetCore.Mvc.JsonResult' does not contain a definition for 'success'
[2024-12-27 20:14:33.252] [WRN] Failed to determine the https port for redirect.
[2024-12-27 20:14:33.935] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 20:14:46.884] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 20:14:46.927] [INF] Found cart for user khnguyenne: True
[2024-12-27 20:14:46.953] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:14:46.953] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:14:46.954] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:14:46.954] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:14:46.961] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:14:46.961] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:14:46.961] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:14:46.962] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:14:50.989] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:14:50.989] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:14:50.992] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:14:50.992] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:14:51.615] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:14:51.616] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:14:51.619] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:14:51.619] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:14:52.741] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:14:52.743] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:14:52.745] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:14:52.746] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:14:52.751] [INF] Found cart for user khnguyenne: True
[2024-12-27 20:14:52.752] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 20:14:52.753] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 20:14:56.743] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:14:56.744] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:14:56.746] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:14:56.747] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:14:56.752] [INF] Found cart for user khnguyenne: True
[2024-12-27 20:14:56.752] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 20:14:56.753] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 20:29:57.488] [WRN] Failed to determine the https port for redirect.
[2024-12-27 20:29:58.174] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 20:30:04.858] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:30:04.863] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:30:05.871] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:30:05.874] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:30:05.903] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 20:30:10.975] [INF] Found cart for user khnguyenne: True
[2024-12-27 20:30:10.977] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 20:30:11.008] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:30:11.012] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:30:11.016] [INF] Found cart for user khnguyenne: True
[2024-12-27 20:30:11.021] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 20:30:11.038] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:30:11.041] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:30:11.045] [INF] Found cart for user khnguyenne: True
[2024-12-27 20:30:11.046] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 20:30:39.438] [ERR] Error in VerifyOrderCode: 'Microsoft.AspNetCore.Mvc.JsonResult' does not contain a definition for 'success'
[2024-12-27 20:31:31.856] [WRN] Failed to determine the https port for redirect.
[2024-12-27 20:31:32.337] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 20:34:07.249] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:34:07.254] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:34:07.690] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:34:07.691] [INF] Product Freeze Choco price: 60000
[2024-12-27 20:34:07.693] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:34:07.694] [INF] Product Freeze Choco price: 60000
[2024-12-27 20:34:08.915] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:34:08.915] [INF] Product Freeze Choco price: 60000
[2024-12-27 20:34:08.918] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:34:08.919] [INF] Product Freeze Choco price: 60000
[2024-12-27 20:34:08.947] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 20:34:08.991] [INF] Found cart for user khnguyenne: True
[2024-12-27 20:34:08.993] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 20:34:08.993] [INF] Product: Freeze Choco, Price: 60000, Size: Size01    
[2024-12-27 20:35:15.105] [ERR] Error in VerifyOrderCode: 'Microsoft.AspNetCore.Mvc.JsonResult' does not contain a definition for 'success'
[2024-12-27 20:43:36.802] [WRN] Failed to determine the https port for redirect.
[2024-12-27 20:43:37.332] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 20:43:44.998] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:43:45.005] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:43:45.362] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:43:45.363] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:43:45.366] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:43:45.366] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:43:46.645] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:43:46.647] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:43:46.650] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:43:46.650] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:43:46.676] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 20:43:46.724] [INF] Found cart for user khnguyenne: True
[2024-12-27 20:43:46.727] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 20:43:46.728] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 20:44:36.348] [ERR] Error in VerifyOrderCode: 'DemoApp_Test.Controllers.HomeController.PlaceOrderResult' does not contain a definition for 'success'
[2024-12-27 20:44:59.054] [WRN] Failed to determine the https port for redirect.
[2024-12-27 20:44:59.941] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 20:45:05.919] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:45:05.937] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:45:08.240] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:45:08.241] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:45:08.243] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:45:08.244] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:45:09.638] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:45:09.640] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:45:09.643] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:45:09.644] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:45:09.672] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 20:45:09.708] [INF] Found cart for user khnguyenne: True
[2024-12-27 20:45:09.709] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 20:45:09.709] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 20:46:46.373] [WRN] Failed to determine the https port for redirect.
[2024-12-27 20:46:47.105] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 20:46:55.606] [INF] Product Cappuccino price: 55000
[2024-12-27 20:46:55.612] [INF] Product Cappuccino price: 55000
[2024-12-27 20:46:55.936] [INF] Product Cappuccino price: 55000
[2024-12-27 20:46:55.936] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:46:55.939] [INF] Product Cappuccino price: 55000
[2024-12-27 20:46:55.940] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:46:56.539] [INF] Product Cappuccino price: 55000
[2024-12-27 20:46:56.540] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:46:56.540] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:46:56.544] [INF] Product Cappuccino price: 55000
[2024-12-27 20:46:56.544] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:46:56.545] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:46:57.566] [INF] Product Cappuccino price: 55000
[2024-12-27 20:46:57.566] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:46:57.567] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:46:57.569] [INF] Product Cappuccino price: 55000
[2024-12-27 20:46:57.570] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:46:57.570] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:46:57.594] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 20:46:57.642] [INF] Found cart for user khnguyenne: True
[2024-12-27 20:46:57.643] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 20:46:57.644] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 20:46:57.645] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 20:47:38.704] [ERR] Error in VerifyOrderCode: 'DemoApp_Test.Controllers.HomeController.PlaceOrderResult' does not contain a definition for 'billId'
[2024-12-27 20:50:51.807] [WRN] Failed to determine the https port for redirect.
[2024-12-27 20:50:52.495] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 20:51:02.817] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:51:02.823] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:51:03.901] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:51:03.902] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:51:03.904] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:51:03.905] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:51:05.094] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:51:05.095] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:51:05.097] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:51:05.098] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:51:05.118] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 20:51:05.166] [INF] Found cart for user khnguyenne: True
[2024-12-27 20:51:05.167] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 20:51:05.168] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 20:51:53.168] [ERR] Error in VerifyOrderCode: 'DemoApp_Test.Controllers.HomeController.PlaceOrderResult' does not contain a definition for 'success'
[2024-12-27 20:52:52.307] [ERR] Error in VerifyOrderCode: 'DemoApp_Test.Controllers.HomeController.PlaceOrderResult' does not contain a definition for 'success'
[2024-12-27 20:54:24.007] [WRN] Failed to determine the https port for redirect.
[2024-12-27 20:54:24.711] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 20:54:31.895] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:54:31.900] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:54:32.123] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:54:32.124] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:54:32.127] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:54:32.128] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:54:33.522] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:54:33.522] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:54:33.525] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:54:33.525] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:54:33.543] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 20:54:33.587] [INF] Found cart for user khnguyenne: True
[2024-12-27 20:54:33.588] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 20:54:33.589] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 20:55:58.740] [ERR] Error in VerifyOrderCode: 'DemoApp_Test.Controllers.HomeController.PlaceOrderResult' does not contain a definition for 'billId'
[2024-12-27 20:57:20.357] [WRN] Failed to determine the https port for redirect.
[2024-12-27 20:57:20.938] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 20:57:32.860] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:57:32.860] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:57:32.862] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:57:32.863] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:57:32.868] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:57:32.868] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:57:32.868] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:57:32.869] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:57:34.810] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:57:34.810] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:57:34.813] [INF] Product Cookie Freeze price: 60000
[2024-12-27 20:57:34.814] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 20:57:34.845] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 20:57:34.891] [INF] Found cart for user khnguyenne: True
[2024-12-27 20:57:34.894] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 20:57:34.895] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 20:58:16.249] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 21:01:42.526] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:01:42.530] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:01:43.029] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:01:43.030] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:01:43.033] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:01:43.033] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:01:44.293] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:01:44.294] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:01:44.296] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:01:44.297] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:01:44.328] [INF] Found cart for user khnguyenne: True
[2024-12-27 21:01:44.329] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 21:01:44.330] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 21:01:55.352] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:01:55.355] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:01:55.357] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:01:55.358] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:01:55.401] [INF] Found cart for user khnguyenne: True
[2024-12-27 21:01:55.402] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 21:01:55.403] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 21:02:23.227] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:02:23.228] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:02:23.230] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:02:23.231] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:02:23.237] [INF] Found cart for user khnguyenne: True
[2024-12-27 21:02:23.238] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 21:02:23.238] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 21:02:49.463] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:02:49.464] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:02:49.467] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:02:49.468] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:02:49.474] [INF] Found cart for user khnguyenne: True
[2024-12-27 21:02:49.475] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 21:02:49.476] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 21:03:34.822] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:03:34.825] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:03:36.644] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:03:36.645] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:03:36.647] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:03:36.648] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:03:37.526] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:03:37.527] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:03:37.528] [INF] Product Caramel Machiato price: 55000
[2024-12-27 21:03:37.530] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:03:37.531] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:03:37.531] [INF] Product Caramel Machiato price: 55000
[2024-12-27 21:03:38.763] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:03:38.765] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:03:38.765] [INF] Product Caramel Machiato price: 55000
[2024-12-27 21:03:38.768] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:03:38.768] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:03:38.769] [INF] Product Caramel Machiato price: 55000
[2024-12-27 21:03:38.809] [INF] Found cart for user khnguyenne: True
[2024-12-27 21:03:38.811] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 21:03:38.812] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 21:03:38.813] [INF] Product: Caramel Machiato, Price: 55000, Size: Size01    
[2024-12-27 21:14:08.444] [WRN] Failed to determine the https port for redirect.
[2024-12-27 21:14:08.925] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 21:14:21.340] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:14:21.341] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:14:21.342] [INF] Product Caramel Machiato price: 55000
[2024-12-27 21:14:21.345] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:14:21.346] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:14:21.346] [INF] Product Caramel Machiato price: 55000
[2024-12-27 21:14:21.367] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 21:14:21.410] [INF] Found cart for user khnguyenne: True
[2024-12-27 21:14:21.411] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 21:14:21.411] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 21:14:21.412] [INF] Product: Caramel Machiato, Price: 55000, Size: Size01    
[2024-12-27 21:15:35.780] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 21:15:45.318] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:15:45.321] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:15:45.949] [INF] Product Cappuccino price: 55000
[2024-12-27 21:15:45.950] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:15:45.952] [INF] Product Cappuccino price: 55000
[2024-12-27 21:15:45.953] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:15:47.804] [INF] Product Cappuccino price: 55000
[2024-12-27 21:15:47.805] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:15:47.808] [INF] Product Cappuccino price: 55000
[2024-12-27 21:15:47.809] [INF] Product Cookie Freeze price: 60000
[2024-12-27 21:15:47.851] [INF] Found cart for user khnguyenne: True
[2024-12-27 21:15:47.853] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 21:15:47.854] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 21:17:08.257] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:17:08.259] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:17:08.683] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:17:08.684] [INF] Product Cappuccino price: 55000
[2024-12-27 21:17:08.686] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:17:08.686] [INF] Product Cappuccino price: 55000
[2024-12-27 21:17:14.185] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:17:14.185] [INF] Product Cappuccino price: 55000
[2024-12-27 21:17:14.187] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 21:17:14.188] [INF] Product Cappuccino price: 55000
[2024-12-27 21:17:14.211] [INF] Found cart for user khnguyenne: True
[2024-12-27 21:17:14.212] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 21:17:14.213] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 21:17:49.778] [INF] Access Login Page
[2024-12-27 22:02:22.501] [WRN] Failed to determine the https port for redirect.
[2024-12-27 22:02:22.985] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 22:02:27.144] [INF] Access Login Page
[2024-12-27 22:03:28.431] [INF] Access Login Page
[2024-12-27 22:03:45.897] [INF] Login successful
[2024-12-27 22:03:51.210] [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
[2024-12-27 22:03:51.234] [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
[2024-12-27 22:03:54.803] [INF] Current user role: Admin
[2024-12-27 22:03:55.001] [INF] Current user role: Admin
[2024-12-27 22:03:56.725] [INF] Current user role: Admin
[2024-12-27 22:03:56.849] [INF] Current user role: Admin
[2024-12-27 22:03:59.163] [INF] Current user role: Admin
[2024-12-27 22:03:59.269] [INF] Current user role: Admin
[2024-12-27 22:03:59.786] [INF] Current user role: Admin
[2024-12-27 22:03:59.946] [INF] Current user role: Admin
[2024-12-27 22:04:18.516] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 22:04:23.355] [INF] Current user role: Admin
[2024-12-27 22:04:23.453] [INF] Current user role: Admin
[2024-12-27 22:04:25.515] [INF] Current user role: Admin
[2024-12-27 22:04:25.663] [INF] Current user role: Admin
[2024-12-27 22:04:58.163] [INF] Attempting to delete account with username: haidangctn
[2024-12-27 22:04:58.205] [INF] Successfully deleted account: haidangctn
[2024-12-27 22:05:02.616] [INF] Access Login Page
[2024-12-27 22:05:55.024] [INF] Access Login Page
[2024-12-27 22:05:56.556] [INF] Login successful
[2024-12-27 22:06:16.509] [INF] Current user role: Admin
[2024-12-27 22:06:16.654] [INF] Current user role: Admin
[2024-12-27 22:11:21.889] [INF] Access Login Page
[2024-12-27 22:15:23.096] [WRN] Failed to determine the https port for redirect.
[2024-12-27 22:15:23.781] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 22:15:27.778] [INF] Access Login Page
[2024-12-27 22:15:31.170] [INF] Login successful
[2024-12-27 22:15:39.669] [INF] Access Login Page
[2024-12-27 22:15:43.534] [INF] Login successful
[2024-12-27 22:15:46.492] [INF] Access Login Page
[2024-12-27 22:15:49.813] [INF] Login successful
[2024-12-27 22:15:57.145] [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
[2024-12-27 22:15:57.165] [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
[2024-12-27 22:16:07.958] [INF] Attempting to delete account with username: haidangbn1
[2024-12-27 22:16:07.958] [INF] Attempting to delete account with username: haidangbn1
[2024-12-27 22:16:07.958] [INF] Attempting to delete account with username: haidangbn1
[2024-12-27 22:16:07.959] [INF] Attempting to delete account with username: haidangbn1
[2024-12-27 22:16:07.958] [INF] Attempting to delete account with username: haidangbn1
[2024-12-27 22:16:07.958] [INF] Attempting to delete account with username: haidangbn1
[2024-12-27 22:16:08.031] [INF] Successfully deleted account: haidangbn1
[2024-12-27 22:16:08.071] [ERR] Error logging admin activity
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DemoApp_Test.Area.Admin.Controllers.AdminController.LogAdminActivity(String actionType, String actionDetails) in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Areas\Admin\Controllers\AdminController.cs:line 66
[2024-12-27 22:16:08.105] [ERR] Error logging admin activity
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DemoApp_Test.Area.Admin.Controllers.AdminController.LogAdminActivity(String actionType, String actionDetails) in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Areas\Admin\Controllers\AdminController.cs:line 66
[2024-12-27 22:16:08.071] [ERR] Error logging admin activity
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DemoApp_Test.Area.Admin.Controllers.AdminController.LogAdminActivity(String actionType, String actionDetails) in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Areas\Admin\Controllers\AdminController.cs:line 66
[2024-12-27 22:16:08.088] [ERR] Error logging admin activity
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DemoApp_Test.Area.Admin.Controllers.AdminController.LogAdminActivity(String actionType, String actionDetails) in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Areas\Admin\Controllers\AdminController.cs:line 66
[2024-12-27 22:16:08.121] [ERR] Error logging admin activity
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DemoApp_Test.Area.Admin.Controllers.AdminController.LogAdminActivity(String actionType, String actionDetails) in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Areas\Admin\Controllers\AdminController.cs:line 66
[2024-12-27 22:16:08.122] [INF] Attempting to delete account with username: haidangbn1
[2024-12-27 22:16:08.161] [ERR] Error deleting account: haidangbn1
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DemoApp_Test.Area.Admin.Controllers.AdminController.DeleteAccount(String id) in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Areas\Admin\Controllers\AdminController.cs:line 540
[2024-12-27 22:16:08.172] [WRN] Account not found for deletion: haidangbn1
[2024-12-27 22:16:08.180] [ERR] Error deleting account: haidangbn1
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DemoApp_Test.Area.Admin.Controllers.AdminController.DeleteAccount(String id) in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Areas\Admin\Controllers\AdminController.cs:line 540
[2024-12-27 22:16:08.199] [ERR] Error deleting account: haidangbn1
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DemoApp_Test.Area.Admin.Controllers.AdminController.DeleteAccount(String id) in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Areas\Admin\Controllers\AdminController.cs:line 540
[2024-12-27 22:16:08.202] [INF] Attempting to delete account with username: haidangbn1
[2024-12-27 22:16:08.224] [ERR] Error deleting account: haidangbn1
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DemoApp_Test.Area.Admin.Controllers.AdminController.DeleteAccount(String id) in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Areas\Admin\Controllers\AdminController.cs:line 540
[2024-12-27 22:16:08.245] [ERR] Error deleting account: haidangbn1
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DemoApp_Test.Area.Admin.Controllers.AdminController.DeleteAccount(String id) in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Areas\Admin\Controllers\AdminController.cs:line 540
[2024-12-27 22:16:08.249] [WRN] Account not found for deletion: haidangbn1
[2024-12-27 22:16:12.288] [INF] Access Login Page
[2024-12-27 22:20:50.666] [WRN] Failed to determine the https port for redirect.
[2024-12-27 22:20:51.280] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 22:20:56.129] [INF] Access Login Page
[2024-12-27 22:21:52.523] [WRN] Failed to determine the https port for redirect.
[2024-12-27 22:21:53.237] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 22:21:57.337] [INF] Access Login Page
[2024-12-27 22:21:58.583] [WRN] Login failed for username: haidangbn1
[2024-12-27 22:22:13.602] [INF] Access Login Page
[2024-12-27 22:22:15.099] [INF] Login successful
[2024-12-27 22:22:32.159] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 22:22:32.200] [INF] Found cart for user haidangbn1: False
[2024-12-27 22:22:42.309] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:22:42.316] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:22:42.332] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:22:42.335] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:22:42.361] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:22:42.409] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:22:42.409] [INF] Found cart for user haidangbn1: True
[2024-12-27 22:22:42.409] [INF] Found cart for user haidangbn1: True
[2024-12-27 22:22:42.412] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 22:22:42.412] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 22:22:42.417] [INF] Product Cookie Freeze price: 60000
[2024-12-27 22:22:42.417] [INF] Product Cookie Freeze price: 60000
[2024-12-27 22:22:42.417] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:22:42.418] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:22:42.419] [INF] Product Caramel Machiato price: 55000
[2024-12-27 22:22:42.419] [INF] Product Caramel Machiato price: 55000
[2024-12-27 22:22:42.422] [INF] Product Cookie Freeze price: 60000
[2024-12-27 22:22:42.423] [INF] Product Cookie Freeze price: 60000
[2024-12-27 22:22:42.424] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:22:42.424] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:22:42.425] [INF] Product Caramel Machiato price: 55000
[2024-12-27 22:22:42.425] [INF] Product Caramel Machiato price: 55000
[2024-12-27 22:22:47.516] [INF] Product Cookie Freeze price: 60000
[2024-12-27 22:22:47.517] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:22:47.518] [INF] Product Freeze Trà xanh price: 60000
[2024-12-27 22:22:47.518] [INF] Product Caramel Machiato price: 55000
[2024-12-27 22:22:47.521] [INF] Product Cookie Freeze price: 60000
[2024-12-27 22:22:47.521] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:22:47.522] [INF] Product Freeze Trà xanh price: 60000
[2024-12-27 22:22:47.522] [INF] Product Caramel Machiato price: 55000
[2024-12-27 22:22:48.108] [INF] Product Cookie Freeze price: 60000
[2024-12-27 22:22:48.108] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:22:48.109] [INF] Product Freeze Trà xanh price: 60000
[2024-12-27 22:22:48.110] [INF] Product Caramel Machiato price: 55000
[2024-12-27 22:22:48.112] [INF] Product Cookie Freeze price: 60000
[2024-12-27 22:22:48.112] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:22:48.113] [INF] Product Freeze Trà xanh price: 60000
[2024-12-27 22:22:48.113] [INF] Product Caramel Machiato price: 55000
[2024-12-27 22:22:49.933] [INF] Product Cookie Freeze price: 60000
[2024-12-27 22:22:49.933] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:22:49.934] [INF] Product Freeze Trà xanh price: 60000
[2024-12-27 22:22:49.934] [INF] Product Caramel Machiato price: 55000
[2024-12-27 22:22:49.937] [INF] Product Cookie Freeze price: 60000
[2024-12-27 22:22:49.937] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:22:49.938] [INF] Product Freeze Trà xanh price: 60000
[2024-12-27 22:22:49.938] [INF] Product Caramel Machiato price: 55000
[2024-12-27 22:22:49.944] [INF] Found cart for user haidangbn1: True
[2024-12-27 22:22:49.944] [INF] Product: Cookie Freeze, Price: 60000, Size: Size01    
[2024-12-27 22:22:49.945] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 22:22:49.945] [INF] Product: Freeze Trà xanh, Price: 60000, Size: Size01    
[2024-12-27 22:22:49.946] [INF] Product: Caramel Machiato, Price: 55000, Size: Size01    
[2024-12-27 22:22:52.624] [INF] Attempting to remove product: SP003     
[2024-12-27 22:24:32.502] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 22:29:59.030] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 22:32:39.135] [INF] Found cart for user haidangbn1: True
[2024-12-27 22:33:14.320] [INF] Access Login Page
[2024-12-27 22:33:16.376] [INF] Login successful
[2024-12-27 22:38:27.213] [INF] Access Login Page
[2024-12-27 22:38:30.572] [INF] Login successful
[2024-12-27 22:38:35.354] [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
[2024-12-27 22:38:35.368] [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
[2024-12-27 22:39:30.001] [INF] Current user role: Admin
[2024-12-27 22:39:30.247] [INF] Current user role: Admin
[2024-12-27 22:41:10.841] [INF] Access Login Page
[2024-12-27 22:41:13.098] [INF] Login successful
[2024-12-27 22:45:33.217] [INF] Access Login Page
[2024-12-27 22:45:41.958] [INF] Login successful
[2024-12-27 22:45:41.958] [WRN] Login failed for username: admin
[2024-12-27 22:46:17.667] [INF] Access Login Page
[2024-12-27 22:46:21.380] [INF] Login successful
[2024-12-27 22:47:21.908] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:47:21.909] [INF] Product Cappuccino price: 55000
[2024-12-27 22:47:21.910] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:47:21.911] [INF] Product Cappuccino price: 55000
[2024-12-27 22:47:21.941] [INF] Found cart for user khnguyenne: True
[2024-12-27 22:47:21.943] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 22:47:21.943] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 22:49:14.910] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:49:14.911] [INF] Product Mocha price: 55000
[2024-12-27 22:49:14.911] [INF] Product Cappuccino price: 55000
[2024-12-27 22:49:14.913] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:49:14.913] [INF] Product Mocha price: 55000
[2024-12-27 22:49:14.913] [INF] Product Cappuccino price: 55000
[2024-12-27 22:49:16.827] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:49:16.828] [INF] Product Mocha price: 55000
[2024-12-27 22:49:16.828] [INF] Product Phin Đen Đá price: 30000
[2024-12-27 22:49:16.829] [INF] Product Cappuccino price: 55000
[2024-12-27 22:49:16.831] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:49:16.831] [INF] Product Mocha price: 55000
[2024-12-27 22:49:16.832] [INF] Product Phin Đen Đá price: 30000
[2024-12-27 22:49:16.832] [INF] Product Cappuccino price: 55000
[2024-12-27 22:49:18.245] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:49:18.246] [INF] Product Mocha price: 55000
[2024-12-27 22:49:18.247] [INF] Product Phin Đen Đá price: 30000
[2024-12-27 22:49:18.247] [INF] Product Cappuccino price: 55000
[2024-12-27 22:49:18.249] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 22:49:18.250] [INF] Product Mocha price: 55000
[2024-12-27 22:49:18.251] [INF] Product Phin Đen Đá price: 30000
[2024-12-27 22:49:18.251] [INF] Product Cappuccino price: 55000
[2024-12-27 22:49:18.283] [INF] Found cart for user khnguyenne: True
[2024-12-27 22:49:18.284] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 22:49:18.285] [INF] Product: Mocha, Price: 55000, Size: Size01    
[2024-12-27 22:49:18.285] [INF] Product: Phin Đen Đá, Price: 30000, Size: Size01    
[2024-12-27 22:49:18.286] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 23:14:17.236] [WRN] Failed to determine the https port for redirect.
[2024-12-27 23:14:17.992] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 23:15:17.043] [INF] Access Login Page
[2024-12-27 23:15:19.323] [INF] Login successful
[2024-12-27 23:15:21.675] [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
[2024-12-27 23:15:21.693] [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
[2024-12-27 23:15:25.196] [INF] Current user role: Admin
[2024-12-27 23:15:25.422] [INF] Current user role: Admin
[2024-12-27 23:16:05.782] [INF] Current user role: Admin
[2024-12-27 23:16:06.329] [INF] Current user role: Admin
[2024-12-27 23:18:49.886] [INF] Current user role: Admin
[2024-12-27 23:18:50.072] [INF] Current user role: Admin
[2024-12-27 23:19:15.058] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 23:19:27.808] [INF] Current user role: Admin
[2024-12-27 23:19:27.993] [INF] Current user role: Admin
[2024-12-27 23:19:52.440] [INF] Current user role: Admin
[2024-12-27 23:19:52.606] [INF] Current user role: Admin
[2024-12-27 23:19:57.964] [INF] Access Login Page
[2024-12-27 23:20:14.633] [INF] Access Login Page
[2024-12-27 23:20:15.570] [INF] Login successful
[2024-12-27 23:20:19.109] [INF] Product Cappuccino price: 55000
[2024-12-27 23:20:19.114] [INF] Product Cappuccino price: 55000
[2024-12-27 23:20:19.777] [INF] Product Cappuccino price: 55000
[2024-12-27 23:20:19.778] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 23:20:19.780] [INF] Product Cappuccino price: 55000
[2024-12-27 23:20:19.780] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 23:20:20.915] [INF] Product Freeze Trà xanh price: 60000
[2024-12-27 23:20:20.916] [INF] Product Cappuccino price: 55000
[2024-12-27 23:20:20.916] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 23:20:20.919] [INF] Product Freeze Trà xanh price: 60000
[2024-12-27 23:20:20.919] [INF] Product Cappuccino price: 55000
[2024-12-27 23:20:20.920] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 23:20:23.387] [INF] Product Freeze Trà xanh price: 60000
[2024-12-27 23:20:23.388] [INF] Product Cappuccino price: 55000
[2024-12-27 23:20:23.388] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 23:20:23.391] [INF] Product Freeze Trà xanh price: 60000
[2024-12-27 23:20:23.392] [INF] Product Cappuccino price: 55000
[2024-12-27 23:20:23.392] [INF] Product Caramel Freeze Phindi price: 60000
[2024-12-27 23:20:23.409] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 23:20:23.454] [INF] Found cart for user admin: True
[2024-12-27 23:20:23.455] [INF] Product: Freeze Trà xanh, Price: 60000, Size: Size01    
[2024-12-27 23:20:23.456] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
[2024-12-27 23:20:23.457] [INF] Product: Caramel Freeze Phindi, Price: 60000, Size: Size01    
[2024-12-27 23:21:06.107] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 23:21:13.665] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 23:21:21.005] [INF] Access Login Page
[2024-12-27 23:21:25.940] [INF] Access Login Page
[2024-12-27 23:21:26.791] [INF] Access Login Page
[2024-12-27 23:22:22.190] [INF] Login successful
[2024-12-27 23:22:25.259] [INF] Found cart for user admin: True
[2024-12-27 23:22:27.410] [INF] Access Login Page
[2024-12-27 23:23:42.824] [INF] Access Login Page
[2024-12-27 23:23:44.295] [INF] Login successful
[2024-12-27 23:23:56.572] [INF] Attempting to delete account with username: nhdandz
[2024-12-27 23:23:56.622] [ERR] An exception occurred in the database while saving changes for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Bill_Client". The conflict occurred in database "QLCoffeeShop", table "dbo.Bill", column 'Client_id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5a753c00-5890-4dab-a35e-3aef77bf6776
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Bill_Client". The conflict occurred in database "QLCoffeeShop", table "dbo.Bill", column 'Client_id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5a753c00-5890-4dab-a35e-3aef77bf6776
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2024-12-27 23:23:56.651] [ERR] Error logging admin activity
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Bill_Client". The conflict occurred in database "QLCoffeeShop", table "dbo.Bill", column 'Client_id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5a753c00-5890-4dab-a35e-3aef77bf6776
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DemoApp_Test.Area.Admin.Controllers.AdminController.LogAdminActivity(String actionType, String actionDetails) in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Areas\Admin\Controllers\AdminController.cs:line 66
[2024-12-27 23:23:56.668] [ERR] An exception occurred in the database while saving changes for context type 'DemoApp_Test.Repository.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Bill_Client". The conflict occurred in database "QLCoffeeShop", table "dbo.Bill", column 'Client_id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5a753c00-5890-4dab-a35e-3aef77bf6776
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Bill_Client". The conflict occurred in database "QLCoffeeShop", table "dbo.Bill", column 'Client_id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5a753c00-5890-4dab-a35e-3aef77bf6776
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2024-12-27 23:23:56.688] [ERR] Error deleting account: nhdandz
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Bill_Client". The conflict occurred in database "QLCoffeeShop", table "dbo.Bill", column 'Client_id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5a753c00-5890-4dab-a35e-3aef77bf6776
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DemoApp_Test.Area.Admin.Controllers.AdminController.DeleteAccount(String id) in U:\Data_21_12_2024\Laptop_21_12_2024\ReposC#\NHDanDz\DemoApp_Test - Copy (2)\DemoApp_Test\Areas\Admin\Controllers\AdminController.cs:line 540
[2024-12-27 23:24:06.805] [INF] Access Login Page
[2024-12-27 23:24:54.100] [INF] Access Login Page
[2024-12-27 23:25:36.162] [INF] Access Login Page
[2024-12-27 23:25:37.732] [INF] Login successful
[2024-12-27 23:32:10.749] [WRN] Failed to determine the https port for redirect.
[2024-12-27 23:32:11.238] [WRN] The foreign key property 'Shipping.Bill_id1' was created in shadow state because a conflicting property with the simple name 'Bill_id' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[2024-12-27 23:32:16.692] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 23:32:16.730] [INF] Found cart for user admin: True
[2024-12-27 23:32:19.674] [INF] Access Login Page
[2024-12-27 23:33:06.579] [INF] Access Login Page
[2024-12-27 23:33:14.329] [INF] Login successful
[2024-12-27 23:33:18.163] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 23:33:24.240] [INF] Access Login Page
[2024-12-27 23:33:27.901] [INF] Access Login Page
[2024-12-27 23:35:10.798] [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2024-12-27 23:37:08.146] [INF] Access Login Page
[2024-12-27 23:37:10.056] [INF] Login successful
[2024-12-27 23:38:36.340] [INF] Found cart for user haidangctn: False
[2024-12-27 23:40:52.187] [INF] Product Cappuccino price: 55000
[2024-12-27 23:40:52.191] [INF] Product Cappuccino price: 55000
[2024-12-27 23:40:54.164] [INF] Product Cappuccino price: 55000
[2024-12-27 23:40:54.167] [INF] Product Cappuccino price: 55000
[2024-12-27 23:40:54.212] [INF] Found cart for user haidangctn: True
[2024-12-27 23:40:54.213] [INF] Product: Cappuccino, Price: 55000, Size: Size01    
